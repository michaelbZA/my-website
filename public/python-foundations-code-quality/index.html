<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Part 7: Code Quality & Collaboration in Python | Michael Brunger</title>
<meta name=keywords content="python,git,github,pep8,linting,flake8,black,documentation,docstrings,sphinx"><meta name=description content="Learn version control with Git and GitHub, write clean PEP 8-compliant code, use linters and auto-formatters, and create effective documentation for your Python projects."><meta name=author content="Michael Brunger"><link rel=canonical href=http://localhost:1313/python-foundations-code-quality/><link crossorigin=anonymous href=http://localhost:1313/assets/css/stylesheet.a3b7df4b40932c1c84dc95109cf3c35a55a3e562fdea84ed5fe8a7f071b62d94.css integrity="sha256-o7ffS0CTLByE3JUQnPPDWlWj5WL96oTtX+in8HG2LZQ=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/python-foundations-code-quality/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=text/javascript src='https://app.cookieyes.com/mAsBCNFb37oPK_4XJgj7kpxbljvjKgiPcLeSeiRyslQSWcJQA0P7w_nb-e_NfuwZCdsSDi_gh_1zVLQNUSNV8A=='></script><script id=cookieyes type=text/javascript src=https://cdn-cookieyes.com/client_data/8dbaf9037ea60d809e6f1613/script.js></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Orbitron:wght@400..900&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-XJJLP6S9JL" data-cookieyes=cookieyes-analytics></script><script data-cookieyes=cookieyes-analytics>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XJJLP6S9JL")</script><script src=http://localhost:1313/js/extended/back-to-top.min.js defer></script><script src=http://localhost:1313/js/extended/sticky-header.min.js defer></script><script src=http://localhost:1313/js/extended/menu-trigger.min.js defer></script><meta property="og:url" content="http://localhost:1313/python-foundations-code-quality/"><meta property="og:site_name" content="Michael Brunger"><meta property="og:title" content="Part 7: Code Quality & Collaboration in Python"><meta property="og:description" content="Learn version control with Git and GitHub, write clean PEP 8-compliant code, use linters and auto-formatters, and create effective documentation for your Python projects."><meta property="og:locale" content="en-GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-12T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-06T12:41:15+01:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Git"><meta property="article:tag" content="Github"><meta property="article:tag" content="Pep8"><meta property="article:tag" content="Linting"><meta property="article:tag" content="Flake8"><meta property="og:image" content="http://localhost:1313/site-feature-image.jpg"><meta property="og:see_also" content="http://localhost:1313/python-foundations-advanced-topics/"><meta property="og:see_also" content="http://localhost:1313/python-foundations-gui-applications/"><meta property="og:see_also" content="http://localhost:1313/python-foundations-web-development/"><meta property="og:see_also" content="http://localhost:1313/summary/"><meta property="og:see_also" content="http://localhost:1313/python-foundations-oop/"><meta property="og:see_also" content="http://localhost:1313/python-foundations-data-visualization/"><meta property="og:see_also" content="http://localhost:1313/python-foundations-pandas/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/site-feature-image.jpg"><meta name=twitter:title content="Part 7: Code Quality & Collaboration in Python"><meta name=twitter:description content="Learn version control with Git and GitHub, write clean PEP 8-compliant code, use linters and auto-formatters, and create effective documentation for your Python projects."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Python Series","item":"http://localhost:1313/posts/python-series/"},{"@type":"ListItem","position":3,"name":"Part 7: Code Quality \u0026 Collaboration in Python","item":"http://localhost:1313/python-foundations-code-quality/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Part 7: Code Quality \u0026 Collaboration in Python","name":"Part 7: Code Quality \u0026 Collaboration in Python","description":"Learn version control with Git and GitHub, write clean PEP 8-compliant code, use linters and auto-formatters, and create effective documentation for your Python projects.","keywords":["python","git","github","pep8","linting","flake8","black","documentation","docstrings","sphinx"],"articleBody":"Code Quality \u0026 Collaboration As we progress beyond the fundamentals of Python, it’s time to address an often-overlooked aspect of programming: writing quality code that’s easy to maintain and collaborate on. For finance professionals using Python, this is especially important as your scripts may be used for critical financial analysis, reporting, or even compliance tasks.\nIn this post, I’ll cover version control with Git, writing clean code, formatting, and documentation practices that will transform your Python projects from “scripts that work” into “professional-grade software.”\nVersion Control Fundamentals with Git \u0026 GitHub Version control is like a time machine for your code. It tracks changes, allows experimentation without fear, and enables collaboration. Git is the industry standard, and GitHub is the most popular platform for hosting Git repositories.\nWhy Version Control Matters for Financial Code Audit Trail: Track exactly who changed what and when—critical for financial applications Experimentation: Safely try new analysis techniques without risking your working code Collaboration: Multiple team members can work on the same codebase without conflicts Backup: Your code is stored in multiple locations, protecting against data loss Getting Started with Git First, download and install Git for your operating system. Then, set up your identity:\ngit config --global user.name \"Your Name\" git config --global user.email \"your.email@example.com\" Creating a Git Repository To start tracking a project:\n# Navigate to your project directory cd C:\\Users\\YourName\\Documents\\financial-analysis-project # Initialize a Git repository git init The Basic Git Workflow The Git workflow revolves around three main areas:\nWorking directory (your actual files) Staging area (preparing changes for commit) Repository (committed history) Checking Status To see which files have changed:\ngit status Example output:\nOn branch main\rUntracked files:\r(use \"git add ...\" to include in what will be committed)\rfinancial_analysis.py\rdata_loader.py\rnothing added to commit but untracked files present (use \"git add\" to track) Staging Changes Add files to the staging area:\n# Add specific files git add financial_analysis.py # Add all Python files git add *.py # Add all files git add . Committing Changes Save the staged changes with a descriptive message:\ngit commit -m \"Add financial ratio analysis functions\" Always write meaningful commit messages that explain why the change was made, not just what changed.\nWorking with GitHub GitHub allows you to store your repositories remotely and collaborate with others.\nCreating a GitHub Repository Sign up or log in at GitHub Click “New repository” Name it (e.g., “financial-analysis-tools”) Choose public or private Click “Create repository” Connecting Your Local Repository to GitHub GitHub will show commands like these after creating a repository:\n# Connect your local repository to GitHub git remote add origin https://github.com/yourusername/financial-analysis-tools.git # Push your changes to GitHub git push -u origin main Basic GitHub Collaboration Flow Clone a repository to get a local copy:\ngit clone https://github.com/yourusername/financial-analysis-tools.git Pull the latest changes before starting work:\ngit pull origin main Make your changes and commit them\nPush your changes to GitHub:\ngit push origin main Pull Requests When collaborating with others, direct pushing to the main branch is often restricted. Instead, you’ll use pull requests:\nCreate a new branch for your feature:\ngit checkout -b add-depreciation-calculator Make changes, commit, and push to your branch:\ngit push origin add-depreciation-calculator On GitHub, navigate to your repository and click “Compare \u0026 pull request”\nAdd a title and description explaining your changes\nTeam members can now review your code, suggest changes, and eventually merge it\nWriting Clean, PEP 8-Compliant Code Python has an official style guide called PEP 8 that helps make code consistent and readable. Following these standards isn’t just about aesthetics—it makes your code more maintainable and easier for others to understand.\nKey PEP 8 Guidelines Indentation and Line Length Use 4 spaces per indentation level (not tabs) Keep lines at a maximum of 79 characters for code, 72 for comments # Good def calculate_monthly_payment(principal, annual_rate, years): \"\"\" Calculate the monthly payment for a loan. \"\"\" monthly_rate = annual_rate / 12 num_payments = years * 12 return principal * (monthly_rate * (1 + monthly_rate) ** num_payments) / \\ ((1 + monthly_rate) ** num_payments - 1) # Bad - lines too long def calculate_monthly_payment(principal, annual_rate, years): \"\"\"Calculate the monthly payment for a loan.\"\"\" return principal * (annual_rate / 12 * (1 + annual_rate / 12) ** (years * 12)) / ((1 + annual_rate / 12) ** (years * 12) - 1) Imports Import on separate lines Group imports: standard library, third-party, local Avoid wildcard imports (from x import *) # Good import os import sys from datetime import datetime import numpy as np import pandas as pd from financial_tools.utils import calculate_roi Naming Conventions variable_names and function_names use snake_case ClassNames use CamelCase CONSTANTS use ALL_CAPS Avoid single letter names except for counters or short-lived variables # Good def calculate_net_present_value(cash_flows, discount_rate): \"\"\"Calculate NPV of cash flows.\"\"\" npv = 0 for i, cash_flow in enumerate(cash_flows): npv += cash_flow / (1 + discount_rate) ** i return npv # Bad - poor naming def calc_npv(cf, r): \"\"\"Calculate NPV.\"\"\" n = 0 for i, c in enumerate(cf): n += c / (1 + r) ** i return n Whitespace Use blank lines to separate logical sections Use spaces around operators: x = 1 + 2, not x=1+2 No space after function name in calls: function_name(arg), not function_name (arg) # Good def analyze_portfolio(stocks, weights, risk_free_rate=0.02): \"\"\"Analyze a stock portfolio's risk and return metrics.\"\"\" # Calculate portfolio return returns = calculate_weighted_returns(stocks, weights) # Calculate risk metrics volatility = calculate_portfolio_volatility(stocks, weights) sharpe_ratio = (returns - risk_free_rate) / volatility return { 'return': returns, 'volatility': volatility, 'sharpe_ratio': sharpe_ratio } Linting with flake8 Linting tools automatically check your code against style guidelines. flake8 is a popular linter for Python:\n# Install flake8 pip install flake8 # Run on a specific file flake8 financial_analysis.py # Run on entire project flake8 . Sample output:\nfinancial_analysis.py:25:80: E501 line too long (88 \u003e 79 characters)\rfinancial_analysis.py:42:1: E303 too many blank lines (3)\rfinancial_analysis.py:50:17: E225 missing whitespace around operator Auto-formatting with black and isort Manually fixing style issues can be tedious. Tools like black and isort can automatically format your code:\n# Install formatters pip install black isort # Format a file with black black financial_analysis.py # Format imports with isort isort financial_analysis.py # Format an entire project black . isort . Black is an “opinionated” formatter that enforces a consistent style. It might make some formatting changes you disagree with initially, but the consistency it brings is invaluable for team projects.\nSetting Up a Pre-commit Hook You can automate code formatting and linting using Git pre-commit hooks:\nInstall pre-commit:\npip install pre-commit Create a .pre-commit-config.yaml file in your project:\nrepos: - repo: https://github.com/pycqa/isort rev: 5.10.1 hooks: - id: isort - repo: https://github.com/psf/black rev: 22.3.0 hooks: - id: black - repo: https://github.com/pycqa/flake8 rev: 4.0.1 hooks: - id: flake8 Install the hooks:\npre-commit install Now, when you attempt to commit code, these tools will run automatically and prevent the commit if there are style issues.\nWriting Documentation Good documentation is crucial for financial code where understanding the calculation methods and assumptions is critical.\nDocstrings Python uses docstrings for function and class documentation. There are several styles, with Google and NumPy being popular:\nGoogle Style def calculate_loan_amortization(principal, rate, periods, additional_payment=0): \"\"\"Calculate loan amortization schedule with optional additional payments. Args: principal (float): The loan amount rate (float): Annual interest rate (decimal, not percentage) periods (int): Number of payment periods (typically months) additional_payment (float, optional): Extra payment each period Returns: list: List of dictionaries containing payment details for each period Example: \u003e\u003e\u003e schedule = calculate_loan_amortization(100000, 0.04, 360) \u003e\u003e\u003e schedule[0]['principal_payment'] 166.07 \"\"\" NumPy Style def calculate_loan_amortization(principal, rate, periods, additional_payment=0): \"\"\" Calculate loan amortization schedule with optional additional payments. Parameters ---------- principal : float The loan amount rate : float Annual interest rate (decimal, not percentage) periods : int Number of payment periods (typically months) additional_payment : float, optional Extra payment each period (default: 0) Returns ------- list List of dictionaries containing payment details for each period Examples -------- \u003e\u003e\u003e schedule = calculate_loan_amortization(100000, 0.04, 360) \u003e\u003e\u003e schedule[0]['principal_payment'] 166.07 \"\"\" Auto-generating Documentation with Sphinx Sphinx is a tool that can generate professional documentation from your docstrings:\nInstall Sphinx:\npip install sphinx sphinx-rtd-theme Set up a docs directory:\nmkdir docs cd docs sphinx-quickstart Configure conf.py to use your preferred theme:\nhtml_theme = 'sphinx_rtd_theme' Add extensions to auto-generate API docs:\nextensions = [ 'sphinx.ext.autodoc', 'sphinx.ext.napoleon', # For Google/NumPy docstrings 'sphinx.ext.viewcode', ] Build the documentation:\nsphinx-build -b html . _build Practical Example: Refactoring a Financial Script Let’s take a poorly written financial script and improve it using our best practices:\nBefore Refactoring # finance_calcs.py def CalcRoi(i,r): # i is investment and r is return return (r-i)/i def npv(cashFlows,rate): n=0 for i in range(len(cashFlows)): n=n+cashFlows[i]/(1+rate)**i return n def IRR(cfs,guess=0.1): # internal rate of return from numpy import npv import numpy as np rate = guess # Define a function that computes NPV at a given rate def compute_npv(rate): return npv(rate, cfs) # Use numeric methods to find the rate where NPV is approximately 0 from scipy.optimize import newton return newton(compute_npv, guess) def loan_payment(P,r,n): # monthly payment return P * (r/12 * (1 + r/12)**n) / ((1 + r/12)**n - 1) # Quick test if __name__==\"__main__\": print(CalcRoi(1000,1200)) print(npv([-1000,300,400,500],0.1)) print(IRR([-1000,300,400,500])) print(loan_payment(100000,0.05,360)) After Refactoring \"\"\" Financial calculation utilities for investment and loan analysis. This module provides functions for common financial calculations used in investment analysis and loan amortization. \"\"\" import numpy as np from scipy.optimize import newton def calculate_roi(investment, returned): \"\"\" Calculate Return on Investment (ROI). Args: investment (float): Initial investment amount returned (float): Amount returned from investment Returns: float: ROI as a decimal (e.g., 0.2 for 20% return) Example: \u003e\u003e\u003e calculate_roi(1000, 1200) 0.2 \"\"\" return (returned - investment) / investment def calculate_npv(cash_flows, discount_rate): \"\"\" Calculate Net Present Value of a series of cash flows. Args: cash_flows (list): List of cash flows, where the first value is typically the initial investment (negative) discount_rate (float): Annual discount rate as decimal (e.g., 0.1 for 10%) Returns: float: Net Present Value Example: \u003e\u003e\u003e calculate_npv([-1000, 300, 400, 500], 0.1) 80.01 \"\"\" npv_value = 0 for i, cash_flow in enumerate(cash_flows): npv_value += cash_flow / ((1 + discount_rate) ** i) return npv_value def calculate_irr(cash_flows, guess=0.1): \"\"\" Calculate Internal Rate of Return for a series of cash flows. Uses numerical methods to find the discount rate that results in NPV = 0. Args: cash_flows (list): List of cash flows, where the first value is typically the initial investment (negative) guess (float, optional): Initial guess for the IRR. Defaults to 0.1. Returns: float: Internal Rate of Return as decimal Example: \u003e\u003e\u003e calculate_irr([-1000, 300, 400, 500]) 0.18 \"\"\" def npv_function(rate): return np.npv(rate, cash_flows) return newton(npv_function, guess) def calculate_loan_payment(principal, annual_rate, periods): \"\"\" Calculate monthly payment for a fixed-rate loan. Args: principal (float): Loan principal amount annual_rate (float): Annual interest rate as decimal (e.g., 0.05 for 5%) periods (int): Total number of payment periods (e.g., 360 for 30-year mortgage) Returns: float: Monthly payment amount Example: \u003e\u003e\u003e calculate_loan_payment(100000, 0.05, 360) 536.82 \"\"\" monthly_rate = annual_rate / 12 return principal * (monthly_rate * (1 + monthly_rate) ** periods) / \\ ((1 + monthly_rate) ** periods - 1) if __name__ == \"__main__\": # Test each function with example values print(f\"ROI: {calculate_roi(1000, 1200):.2f}\") print(f\"NPV: ${calculate_npv([-1000, 300, 400, 500], 0.1):.2f}\") print(f\"IRR: {calculate_irr([-1000, 300, 400, 500]):.2%}\") print(f\"Monthly payment: ${calculate_loan_payment(100000, 0.05, 360):.2f}\") Key improvements:\nConsistent naming with descriptive function names Comprehensive docstrings with examples Proper spacing and formatting Module-level docstring explaining purpose Better print formatting in the test section Financial Application Example: Investment Analysis Tool Let’s put everything together in a more comprehensive example of a financial analysis tool using best practices:\n\"\"\" Investment Portfolio Analysis Tool This module provides functions to analyze investment portfolios, including return calculations, risk metrics, and diversification assessment. \"\"\" import numpy as np import pandas as pd from scipy import stats def calculate_portfolio_return(prices_df, weights=None): \"\"\" Calculate historical returns of a portfolio. Args: prices_df (pd.DataFrame): DataFrame with asset prices (columns) over time (index) weights (list, optional): Portfolio weights. If None, equal weighting is assumed. Returns: pd.Series: Portfolio returns over time Example: \u003e\u003e\u003e prices = pd.DataFrame({ ... 'AAPL': [150, 152, 153, 149, 155], ... 'MSFT': [250, 248, 253, 255, 260] ... }) \u003e\u003e\u003e calculate_portfolio_return(prices) \"\"\" # Calculate returns for each asset returns_df = prices_df.pct_change().dropna() ","wordCount":"2017","inLanguage":"en","image":"http://localhost:1313/site-feature-image.jpg","datePublished":"2025-06-12T00:00:00Z","dateModified":"2025-05-06T12:41:15+01:00","author":{"@type":"Person","name":"Michael Brunger"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/python-foundations-code-quality/"},"publisher":{"@type":"Organization","name":"Michael Brunger","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Michael Brunger (Alt + H)">Michael Brunger</a><div class=logo-switches></div></div><ul class="menu desktop-menu"><li><a href=http://localhost:1313/ title=Home><span>Home</span></a></li><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/links/ title=Links><span>Links</span></a></li><li><a href=http://localhost:1313/contact/ title=Contact><span>Contact</span></a></li></ul><button id=menu-trigger class=hamburger-menu aria-haspopup=menu aria-label="Menu Button"><div class=hamburger-icon><span></span>
<span></span>
<span></span>
<span></span></div></button></nav></header><div class=mobile-menu-overlay><ul class=mobile-menu><li><a href=http://localhost:1313/>Home</a></li><li><a href=http://localhost:1313/posts/>Posts</a></li><li><a href=http://localhost:1313/search/>Search</a></li><li><a href=http://localhost:1313/about/>About</a></li><li><a href=http://localhost:1313/links/>Links</a></li><li><a href=http://localhost:1313/contact/>Contact</a></li></ul></div><main class=main><div class=reading-progress-container><div class=reading-progress-bar></div></div><script>console.log("Reading progress script loaded"),document.addEventListener("DOMContentLoaded",function(){console.log("DOM Content Loaded");const e=document.querySelector(".reading-progress-bar");if(console.log("Progress bar element:",e),!e){console.log("No progress bar found");return}window.addEventListener("scroll",function(){const n=window.innerHeight,s=document.documentElement.scrollHeight-n,o=window.scrollY,t=o/s*100;e.style.width=t+"%",console.log("Progress:",t+"%")})})</script><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Part 7: Code Quality & Collaboration in Python</h1><div class=post-description>Learn version control with Git and GitHub, write clean PEP 8-compliant code, use linters and auto-formatters, and create effective documentation for your Python projects.</div><div class=post-meta><span class=post-date><i class="far fa-calendar-alt"></i>
June 12, 2025
</span><span class=post-lastmod><i class="fas fa-edit"></i>
Last modified: May 6, 2025
</span><span class=post-reading-time><i class="far fa-clock"></i>
10 min read</span></div></header><div class=toc><details><summary>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#version-control-fundamentals-with-git--github>Version Control Fundamentals with Git & GitHub</a><ul><li><a href=#why-version-control-matters-for-financial-code>Why Version Control Matters for Financial Code</a></li><li><a href=#getting-started-with-git>Getting Started with Git</a></li><li><a href=#creating-a-git-repository>Creating a Git Repository</a></li><li><a href=#the-basic-git-workflow>The Basic Git Workflow</a></li><li><a href=#working-with-github>Working with GitHub</a></li></ul></li><li><a href=#writing-clean-pep-8-compliant-code>Writing Clean, PEP 8-Compliant Code</a><ul><li><a href=#key-pep-8-guidelines>Key PEP 8 Guidelines</a></li><li><a href=#linting-with-flake8>Linting with flake8</a></li><li><a href=#auto-formatting-with-black-and-isort>Auto-formatting with black and isort</a></li><li><a href=#setting-up-a-pre-commit-hook>Setting Up a Pre-commit Hook</a></li></ul></li><li><a href=#writing-documentation>Writing Documentation</a><ul><li><a href=#docstrings>Docstrings</a></li><li><a href=#auto-generating-documentation-with-sphinx>Auto-generating Documentation with Sphinx</a></li></ul></li><li><a href=#practical-example-refactoring-a-financial-script>Practical Example: Refactoring a Financial Script</a><ul><li><a href=#before-refactoring>Before Refactoring</a></li><li><a href=#after-refactoring>After Refactoring</a></li></ul></li><li><a href=#financial-application-example-investment-analysis-tool>Financial Application Example: Investment Analysis Tool</a></li></ul></nav></details></div><div class=post-content><h1 id=code-quality--collaboration>Code Quality & Collaboration<a hidden class=anchor aria-hidden=true href=#code-quality--collaboration>#</a></h1><p>As we progress beyond the fundamentals of Python, it&rsquo;s time to address an often-overlooked aspect of programming: writing quality code that&rsquo;s easy to maintain and collaborate on. For finance professionals using Python, this is especially important as your scripts may be used for critical financial analysis, reporting, or even compliance tasks.</p><p>In this post, I&rsquo;ll cover version control with Git, writing clean code, formatting, and documentation practices that will transform your Python projects from &ldquo;scripts that work&rdquo; into &ldquo;professional-grade software.&rdquo;</p><h2 id=version-control-fundamentals-with-git--github>Version Control Fundamentals with Git & GitHub<a hidden class=anchor aria-hidden=true href=#version-control-fundamentals-with-git--github>#</a></h2><p>Version control is like a time machine for your code. It tracks changes, allows experimentation without fear, and enables collaboration. Git is the industry standard, and GitHub is the most popular platform for hosting Git repositories.</p><h3 id=why-version-control-matters-for-financial-code>Why Version Control Matters for Financial Code<a hidden class=anchor aria-hidden=true href=#why-version-control-matters-for-financial-code>#</a></h3><ul><li><strong>Audit Trail:</strong> Track exactly who changed what and when—critical for financial applications</li><li><strong>Experimentation:</strong> Safely try new analysis techniques without risking your working code</li><li><strong>Collaboration:</strong> Multiple team members can work on the same codebase without conflicts</li><li><strong>Backup:</strong> Your code is stored in multiple locations, protecting against data loss</li></ul><h3 id=getting-started-with-git>Getting Started with Git<a hidden class=anchor aria-hidden=true href=#getting-started-with-git>#</a></h3><p>First, <a href=https://git-scm.com/downloads>download and install Git</a> for your operating system. Then, set up your identity:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global user.name <span style=color:#e6db74>&#34;Your Name&#34;</span>
</span></span><span style=display:flex><span>git config --global user.email <span style=color:#e6db74>&#34;your.email@example.com&#34;</span>
</span></span></code></pre></div><h3 id=creating-a-git-repository>Creating a Git Repository<a hidden class=anchor aria-hidden=true href=#creating-a-git-repository>#</a></h3><p>To start tracking a project:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Navigate to your project directory</span>
</span></span><span style=display:flex><span>cd C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\Y</span>ourName<span style=color:#ae81ff>\D</span>ocuments<span style=color:#ae81ff>\f</span>inancial-analysis-project
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Initialize a Git repository</span>
</span></span><span style=display:flex><span>git init
</span></span></code></pre></div><h3 id=the-basic-git-workflow>The Basic Git Workflow<a hidden class=anchor aria-hidden=true href=#the-basic-git-workflow>#</a></h3><p>The Git workflow revolves around three main areas:</p><ol><li>Working directory (your actual files)</li><li>Staging area (preparing changes for commit)</li><li>Repository (committed history)</li></ol><h4 id=checking-status>Checking Status<a hidden class=anchor aria-hidden=true href=#checking-status>#</a></h4><p>To see which files have changed:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git status
</span></span></code></pre></div><p>Example output:</p><pre tabindex=0><code>On branch main
Untracked files:
  (use &#34;git add &lt;file&gt;...&#34; to include in what will be committed)
        financial_analysis.py
        data_loader.py

nothing added to commit but untracked files present (use &#34;git add&#34; to track)
</code></pre><h4 id=staging-changes>Staging Changes<a hidden class=anchor aria-hidden=true href=#staging-changes>#</a></h4><p>Add files to the staging area:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Add specific files</span>
</span></span><span style=display:flex><span>git add financial_analysis.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add all Python files</span>
</span></span><span style=display:flex><span>git add *.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add all files</span>
</span></span><span style=display:flex><span>git add .
</span></span></code></pre></div><h4 id=committing-changes>Committing Changes<a hidden class=anchor aria-hidden=true href=#committing-changes>#</a></h4><p>Save the staged changes with a descriptive message:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;Add financial ratio analysis functions&#34;</span>
</span></span></code></pre></div><p>Always write meaningful commit messages that explain <em>why</em> the change was made, not just <em>what</em> changed.</p><h3 id=working-with-github>Working with GitHub<a hidden class=anchor aria-hidden=true href=#working-with-github>#</a></h3><p>GitHub allows you to store your repositories remotely and collaborate with others.</p><h4 id=creating-a-github-repository>Creating a GitHub Repository<a hidden class=anchor aria-hidden=true href=#creating-a-github-repository>#</a></h4><ol><li>Sign up or log in at <a href=https://github.com/>GitHub</a></li><li>Click &ldquo;New repository&rdquo;</li><li>Name it (e.g., &ldquo;financial-analysis-tools&rdquo;)</li><li>Choose public or private</li><li>Click &ldquo;Create repository&rdquo;</li></ol><h4 id=connecting-your-local-repository-to-github>Connecting Your Local Repository to GitHub<a hidden class=anchor aria-hidden=true href=#connecting-your-local-repository-to-github>#</a></h4><p>GitHub will show commands like these after creating a repository:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Connect your local repository to GitHub</span>
</span></span><span style=display:flex><span>git remote add origin https://github.com/yourusername/financial-analysis-tools.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Push your changes to GitHub</span>
</span></span><span style=display:flex><span>git push -u origin main
</span></span></code></pre></div><h4 id=basic-github-collaboration-flow>Basic GitHub Collaboration Flow<a hidden class=anchor aria-hidden=true href=#basic-github-collaboration-flow>#</a></h4><ol><li><p><strong>Clone</strong> a repository to get a local copy:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/yourusername/financial-analysis-tools.git
</span></span></code></pre></div></li><li><p><strong>Pull</strong> the latest changes before starting work:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull origin main
</span></span></code></pre></div></li><li><p>Make your changes and <strong>commit</strong> them</p></li><li><p><strong>Push</strong> your changes to GitHub:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push origin main
</span></span></code></pre></div></li></ol><h4 id=pull-requests>Pull Requests<a hidden class=anchor aria-hidden=true href=#pull-requests>#</a></h4><p>When collaborating with others, direct pushing to the main branch is often restricted. Instead, you&rsquo;ll use pull requests:</p><ol><li><p>Create a new branch for your feature:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout -b add-depreciation-calculator
</span></span></code></pre></div></li><li><p>Make changes, commit, and push to your branch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push origin add-depreciation-calculator
</span></span></code></pre></div></li><li><p>On GitHub, navigate to your repository and click &ldquo;Compare & pull request&rdquo;</p></li><li><p>Add a title and description explaining your changes</p></li><li><p>Team members can now review your code, suggest changes, and eventually merge it</p></li></ol><h2 id=writing-clean-pep-8-compliant-code>Writing Clean, PEP 8-Compliant Code<a hidden class=anchor aria-hidden=true href=#writing-clean-pep-8-compliant-code>#</a></h2><p>Python has an official style guide called <a href=https://peps.python.org/pep-0008/>PEP 8</a> that helps make code consistent and readable. Following these standards isn&rsquo;t just about aesthetics—it makes your code more maintainable and easier for others to understand.</p><h3 id=key-pep-8-guidelines>Key PEP 8 Guidelines<a hidden class=anchor aria-hidden=true href=#key-pep-8-guidelines>#</a></h3><h4 id=indentation-and-line-length>Indentation and Line Length<a hidden class=anchor aria-hidden=true href=#indentation-and-line-length>#</a></h4><ul><li>Use 4 spaces per indentation level (not tabs)</li><li>Keep lines at a maximum of 79 characters for code, 72 for comments</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Good</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_monthly_payment</span>(principal, annual_rate, years):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate the monthly payment for a loan.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    monthly_rate <span style=color:#f92672>=</span> annual_rate <span style=color:#f92672>/</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    num_payments <span style=color:#f92672>=</span> years <span style=color:#f92672>*</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> principal <span style=color:#f92672>*</span> (monthly_rate <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> monthly_rate) <span style=color:#f92672>**</span> num_payments) <span style=color:#f92672>/</span> \
</span></span><span style=display:flex><span>           ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> monthly_rate) <span style=color:#f92672>**</span> num_payments <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Bad - lines too long</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_monthly_payment</span>(principal, annual_rate, years):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Calculate the monthly payment for a loan.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> principal <span style=color:#f92672>*</span> (annual_rate <span style=color:#f92672>/</span> <span style=color:#ae81ff>12</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> annual_rate <span style=color:#f92672>/</span> <span style=color:#ae81ff>12</span>) <span style=color:#f92672>**</span> (years <span style=color:#f92672>*</span> <span style=color:#ae81ff>12</span>)) <span style=color:#f92672>/</span> ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> annual_rate <span style=color:#f92672>/</span> <span style=color:#ae81ff>12</span>) <span style=color:#f92672>**</span> (years <span style=color:#f92672>*</span> <span style=color:#ae81ff>12</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span></code></pre></div><h4 id=imports>Imports<a hidden class=anchor aria-hidden=true href=#imports>#</a></h4><ul><li>Import on separate lines</li><li>Group imports: standard library, third-party, local</li><li>Avoid wildcard imports (<code>from x import *</code>)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Good</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> financial_tools.utils <span style=color:#f92672>import</span> calculate_roi
</span></span></code></pre></div><h4 id=naming-conventions>Naming Conventions<a hidden class=anchor aria-hidden=true href=#naming-conventions>#</a></h4><ul><li><code>variable_names</code> and <code>function_names</code> use snake_case</li><li><code>ClassNames</code> use CamelCase</li><li><code>CONSTANTS</code> use ALL_CAPS</li><li>Avoid single letter names except for counters or short-lived variables</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Good</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_net_present_value</span>(cash_flows, discount_rate):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Calculate NPV of cash flows.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    npv <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, cash_flow <span style=color:#f92672>in</span> enumerate(cash_flows):
</span></span><span style=display:flex><span>        npv <span style=color:#f92672>+=</span> cash_flow <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> discount_rate) <span style=color:#f92672>**</span> i
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> npv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Bad - poor naming</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_npv</span>(cf, r):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Calculate NPV.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, c <span style=color:#f92672>in</span> enumerate(cf):
</span></span><span style=display:flex><span>        n <span style=color:#f92672>+=</span> c <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> r) <span style=color:#f92672>**</span> i
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> n
</span></span></code></pre></div><h4 id=whitespace>Whitespace<a hidden class=anchor aria-hidden=true href=#whitespace>#</a></h4><ul><li>Use blank lines to separate logical sections</li><li>Use spaces around operators: <code>x = 1 + 2</code>, not <code>x=1+2</code></li><li>No space after function name in calls: <code>function_name(arg)</code>, not <code>function_name (arg)</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Good</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>analyze_portfolio</span>(stocks, weights, risk_free_rate<span style=color:#f92672>=</span><span style=color:#ae81ff>0.02</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Analyze a stock portfolio&#39;s risk and return metrics.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Calculate portfolio return</span>
</span></span><span style=display:flex><span>    returns <span style=color:#f92672>=</span> calculate_weighted_returns(stocks, weights)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># Calculate risk metrics</span>
</span></span><span style=display:flex><span>    volatility <span style=color:#f92672>=</span> calculate_portfolio_volatility(stocks, weights)
</span></span><span style=display:flex><span>    sharpe_ratio <span style=color:#f92672>=</span> (returns <span style=color:#f92672>-</span> risk_free_rate) <span style=color:#f92672>/</span> volatility
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;return&#39;</span>: returns,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;volatility&#39;</span>: volatility,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;sharpe_ratio&#39;</span>: sharpe_ratio
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h3 id=linting-with-flake8>Linting with flake8<a hidden class=anchor aria-hidden=true href=#linting-with-flake8>#</a></h3><p>Linting tools automatically check your code against style guidelines. <code>flake8</code> is a popular linter for Python:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install flake8</span>
</span></span><span style=display:flex><span>pip install flake8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run on a specific file</span>
</span></span><span style=display:flex><span>flake8 financial_analysis.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run on entire project</span>
</span></span><span style=display:flex><span>flake8 .
</span></span></code></pre></div><p>Sample output:</p><pre tabindex=0><code>financial_analysis.py:25:80: E501 line too long (88 &gt; 79 characters)
financial_analysis.py:42:1: E303 too many blank lines (3)
financial_analysis.py:50:17: E225 missing whitespace around operator
</code></pre><h3 id=auto-formatting-with-black-and-isort>Auto-formatting with black and isort<a hidden class=anchor aria-hidden=true href=#auto-formatting-with-black-and-isort>#</a></h3><p>Manually fixing style issues can be tedious. Tools like <code>black</code> and <code>isort</code> can automatically format your code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install formatters</span>
</span></span><span style=display:flex><span>pip install black isort
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Format a file with black</span>
</span></span><span style=display:flex><span>black financial_analysis.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Format imports with isort</span>
</span></span><span style=display:flex><span>isort financial_analysis.py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Format an entire project</span>
</span></span><span style=display:flex><span>black .
</span></span><span style=display:flex><span>isort .
</span></span></code></pre></div><p>Black is an &ldquo;opinionated&rdquo; formatter that enforces a consistent style. It might make some formatting changes you disagree with initially, but the consistency it brings is invaluable for team projects.</p><h3 id=setting-up-a-pre-commit-hook>Setting Up a Pre-commit Hook<a hidden class=anchor aria-hidden=true href=#setting-up-a-pre-commit-hook>#</a></h3><p>You can automate code formatting and linting using Git pre-commit hooks:</p><ol><li><p>Install pre-commit:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install pre-commit
</span></span></code></pre></div></li><li><p>Create a <code>.pre-commit-config.yaml</code> file in your project:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>repos</span>:
</span></span><span style=display:flex><span>-   <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/pycqa/isort</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>5.10.1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>    -   <span style=color:#f92672>id</span>: <span style=color:#ae81ff>isort</span>
</span></span><span style=display:flex><span>-   <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/psf/black</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>22.3.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>    -   <span style=color:#f92672>id</span>: <span style=color:#ae81ff>black</span>
</span></span><span style=display:flex><span>-   <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/pycqa/flake8</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>4.0.1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>    -   <span style=color:#f92672>id</span>: <span style=color:#ae81ff>flake8</span>
</span></span></code></pre></div></li><li><p>Install the hooks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pre-commit install
</span></span></code></pre></div></li></ol><p>Now, when you attempt to commit code, these tools will run automatically and prevent the commit if there are style issues.</p><h2 id=writing-documentation>Writing Documentation<a hidden class=anchor aria-hidden=true href=#writing-documentation>#</a></h2><p>Good documentation is crucial for financial code where understanding the calculation methods and assumptions is critical.</p><h3 id=docstrings>Docstrings<a hidden class=anchor aria-hidden=true href=#docstrings>#</a></h3><p>Python uses docstrings for function and class documentation. There are several styles, with Google and NumPy being popular:</p><h4 id=google-style>Google Style<a hidden class=anchor aria-hidden=true href=#google-style>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_loan_amortization</span>(principal, rate, periods, additional_payment<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Calculate loan amortization schedule with optional additional payments.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        principal (float): The loan amount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        rate (float): Annual interest rate (decimal, not percentage)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        periods (int): Number of payment periods (typically months)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        additional_payment (float, optional): Extra payment each period
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        list: List of dictionaries containing payment details for each period
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; schedule = calculate_loan_amortization(100000, 0.04, 360)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; schedule[0][&#39;principal_payment&#39;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        166.07
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span></code></pre></div><h4 id=numpy-style>NumPy Style<a hidden class=anchor aria-hidden=true href=#numpy-style>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_loan_amortization</span>(principal, rate, periods, additional_payment<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate loan amortization schedule with optional additional payments.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ----------
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    principal : float
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        The loan amount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    rate : float
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        Annual interest rate (decimal, not percentage)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    periods : int
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        Number of payment periods (typically months)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    additional_payment : float, optional
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        Extra payment each period (default: 0)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    -------
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    list
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        List of dictionaries containing payment details for each period
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Examples
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    --------
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &gt;&gt;&gt; schedule = calculate_loan_amortization(100000, 0.04, 360)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &gt;&gt;&gt; schedule[0][&#39;principal_payment&#39;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    166.07
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span></code></pre></div><h3 id=auto-generating-documentation-with-sphinx>Auto-generating Documentation with Sphinx<a hidden class=anchor aria-hidden=true href=#auto-generating-documentation-with-sphinx>#</a></h3><p>Sphinx is a tool that can generate professional documentation from your docstrings:</p><ol><li><p>Install Sphinx:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install sphinx sphinx-rtd-theme
</span></span></code></pre></div></li><li><p>Set up a docs directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir docs
</span></span><span style=display:flex><span>cd docs
</span></span><span style=display:flex><span>sphinx-quickstart
</span></span></code></pre></div></li><li><p>Configure <code>conf.py</code> to use your preferred theme:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>html_theme <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sphinx_rtd_theme&#39;</span>
</span></span></code></pre></div></li><li><p>Add extensions to auto-generate API docs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>extensions <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;sphinx.ext.autodoc&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;sphinx.ext.napoleon&#39;</span>,  <span style=color:#75715e># For Google/NumPy docstrings</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;sphinx.ext.viewcode&#39;</span>,
</span></span><span style=display:flex><span>]
</span></span></code></pre></div></li><li><p>Build the documentation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sphinx-build -b html . _build
</span></span></code></pre></div></li></ol><h2 id=practical-example-refactoring-a-financial-script>Practical Example: Refactoring a Financial Script<a hidden class=anchor aria-hidden=true href=#practical-example-refactoring-a-financial-script>#</a></h2><p>Let&rsquo;s take a poorly written financial script and improve it using our best practices:</p><h3 id=before-refactoring>Before Refactoring<a hidden class=anchor aria-hidden=true href=#before-refactoring>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># finance_calcs.py</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>CalcRoi</span>(i,r):
</span></span><span style=display:flex><span>    <span style=color:#75715e># i is investment and r is return</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (r<span style=color:#f92672>-</span>i)<span style=color:#f92672>/</span>i
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>npv</span>(cashFlows,rate):
</span></span><span style=display:flex><span>  n<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(cashFlows)):
</span></span><span style=display:flex><span>    n<span style=color:#f92672>=</span>n<span style=color:#f92672>+</span>cashFlows[i]<span style=color:#f92672>/</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>+</span>rate)<span style=color:#f92672>**</span>i
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>IRR</span>(cfs,guess<span style=color:#f92672>=</span><span style=color:#ae81ff>0.1</span>):
</span></span><span style=display:flex><span>    <span style=color:#75715e># internal rate of return</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>from</span> numpy <span style=color:#f92672>import</span> npv
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span>    rate <span style=color:#f92672>=</span> guess
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># Define a function that computes NPV at a given rate</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>compute_npv</span>(rate):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> npv(rate, cfs)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># Use numeric methods to find the rate where NPV is approximately 0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>from</span> scipy.optimize <span style=color:#f92672>import</span> newton
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> newton(compute_npv, guess)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>loan_payment</span>(P,r,n):
</span></span><span style=display:flex><span>    <span style=color:#75715e># monthly payment</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> P <span style=color:#f92672>*</span> (r<span style=color:#f92672>/</span><span style=color:#ae81ff>12</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> r<span style=color:#f92672>/</span><span style=color:#ae81ff>12</span>)<span style=color:#f92672>**</span>n) <span style=color:#f92672>/</span> ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> r<span style=color:#f92672>/</span><span style=color:#ae81ff>12</span>)<span style=color:#f92672>**</span>n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Quick test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__<span style=color:#f92672>==</span><span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    print(CalcRoi(<span style=color:#ae81ff>1000</span>,<span style=color:#ae81ff>1200</span>))
</span></span><span style=display:flex><span>    print(npv([<span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span>,<span style=color:#ae81ff>300</span>,<span style=color:#ae81ff>400</span>,<span style=color:#ae81ff>500</span>],<span style=color:#ae81ff>0.1</span>))
</span></span><span style=display:flex><span>    print(IRR([<span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span>,<span style=color:#ae81ff>300</span>,<span style=color:#ae81ff>400</span>,<span style=color:#ae81ff>500</span>]))
</span></span><span style=display:flex><span>    print(loan_payment(<span style=color:#ae81ff>100000</span>,<span style=color:#ae81ff>0.05</span>,<span style=color:#ae81ff>360</span>))
</span></span></code></pre></div><h3 id=after-refactoring>After Refactoring<a hidden class=anchor aria-hidden=true href=#after-refactoring>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Financial calculation utilities for investment and loan analysis.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>This module provides functions for common financial calculations
</span></span></span><span style=display:flex><span><span style=color:#e6db74>used in investment analysis and loan amortization.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> scipy.optimize <span style=color:#f92672>import</span> newton
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_roi</span>(investment, returned):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate Return on Investment (ROI).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        investment (float): Initial investment amount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        returned (float): Amount returned from investment
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        float: ROI as a decimal (e.g., 0.2 for 20</span><span style=color:#e6db74>% r</span><span style=color:#e6db74>eturn)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; calculate_roi(1000, 1200)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        0.2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (returned <span style=color:#f92672>-</span> investment) <span style=color:#f92672>/</span> investment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_npv</span>(cash_flows, discount_rate):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate Net Present Value of a series of cash flows.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        cash_flows (list): List of cash flows, where the first value is typically
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                          the initial investment (negative)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        discount_rate (float): Annual discount rate as decimal (e.g., 0.1 for 10%)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        float: Net Present Value
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; calculate_npv([-1000, 300, 400, 500], 0.1)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        80.01
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    npv_value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, cash_flow <span style=color:#f92672>in</span> enumerate(cash_flows):
</span></span><span style=display:flex><span>        npv_value <span style=color:#f92672>+=</span> cash_flow <span style=color:#f92672>/</span> ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> discount_rate) <span style=color:#f92672>**</span> i)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> npv_value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_irr</span>(cash_flows, guess<span style=color:#f92672>=</span><span style=color:#ae81ff>0.1</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate Internal Rate of Return for a series of cash flows.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Uses numerical methods to find the discount rate that results in NPV = 0.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        cash_flows (list): List of cash flows, where the first value is typically
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                          the initial investment (negative)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        guess (float, optional): Initial guess for the IRR. Defaults to 0.1.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        float: Internal Rate of Return as decimal
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; calculate_irr([-1000, 300, 400, 500])
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        0.18
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>npv_function</span>(rate):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> np<span style=color:#f92672>.</span>npv(rate, cash_flows)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> newton(npv_function, guess)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_loan_payment</span>(principal, annual_rate, periods):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate monthly payment for a fixed-rate loan.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        principal (float): Loan principal amount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        annual_rate (float): Annual interest rate as decimal (e.g., 0.05 for 5%)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        periods (int): Total number of payment periods (e.g., 360 for 30-year mortgage)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        float: Monthly payment amount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; calculate_loan_payment(100000, 0.05, 360)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        536.82
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    monthly_rate <span style=color:#f92672>=</span> annual_rate <span style=color:#f92672>/</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> principal <span style=color:#f92672>*</span> (monthly_rate <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> monthly_rate) <span style=color:#f92672>**</span> periods) <span style=color:#f92672>/</span> \
</span></span><span style=display:flex><span>        ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> monthly_rate) <span style=color:#f92672>**</span> periods <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Test each function with example values</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ROI: </span><span style=color:#e6db74>{</span>calculate_roi(<span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>1200</span>)<span style=color:#e6db74>:</span><span style=color:#e6db74>.2f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;NPV: $</span><span style=color:#e6db74>{</span>calculate_npv([<span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>500</span>], <span style=color:#ae81ff>0.1</span>)<span style=color:#e6db74>:</span><span style=color:#e6db74>.2f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;IRR: </span><span style=color:#e6db74>{</span>calculate_irr([<span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>500</span>])<span style=color:#e6db74>:</span><span style=color:#e6db74>.2%</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Monthly payment: $</span><span style=color:#e6db74>{</span>calculate_loan_payment(<span style=color:#ae81ff>100000</span>, <span style=color:#ae81ff>0.05</span>, <span style=color:#ae81ff>360</span>)<span style=color:#e6db74>:</span><span style=color:#e6db74>.2f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p>Key improvements:</p><ul><li>Consistent naming with descriptive function names</li><li>Comprehensive docstrings with examples</li><li>Proper spacing and formatting</li><li>Module-level docstring explaining purpose</li><li>Better print formatting in the test section</li></ul><h2 id=financial-application-example-investment-analysis-tool>Financial Application Example: Investment Analysis Tool<a hidden class=anchor aria-hidden=true href=#financial-application-example-investment-analysis-tool>#</a></h2><p>Let&rsquo;s put everything together in a more comprehensive example of a financial analysis tool using best practices:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Investment Portfolio Analysis Tool
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>This module provides functions to analyze investment portfolios,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>including return calculations, risk metrics, and diversification assessment.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> scipy <span style=color:#f92672>import</span> stats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calculate_portfolio_return</span>(prices_df, weights<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculate historical returns of a portfolio.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        prices_df (pd.DataFrame): DataFrame with asset prices (columns) over time (index)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        weights (list, optional): Portfolio weights. If None, equal weighting is assumed.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pd.Series: Portfolio returns over time
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Example:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; prices = pd.DataFrame({
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...     &#39;AAPL&#39;: [150, 152, 153, 149, 155],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...     &#39;MSFT&#39;: [250, 248, 253, 255, 260]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ... })
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &gt;&gt;&gt; calculate_portfolio_return(prices)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Calculate returns for each asset</span>
</span></span><span style=display:flex><span>    returns_df <span style=color:#f92672>=</span> prices_df<span style=color:#f92672>.</span>pct_change()<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    
</span></span></code></pre></div></div><div class=related-posts><h2>Related Posts</h2><div class=related-posts-grid><article class=related-post><a href=http://localhost:1313/introduction-to-git/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Introduction to Git</h3><div class=related-post-meta><time datetime=2025-04-30>April 30, 2025</time><span class=related-post-tags><span class=tag>git</span></span></div></div></a></article><article class=related-post><a href=http://localhost:1313/python-foundations-advanced-topics/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Part 17: Next Steps & Advanced Python Topics</h3><p class=related-post-description>Explore advanced Python topics including concurrency, asyncio, and complete an end-to-end project. Discover resources for further learning and tips for continuing your Python journey.</p><div class=related-post-meta><time datetime=2025-08-21>August 21, 2025</time><span class=related-post-tags><span class=tag>python</span></span></div></div></a></article><article class=related-post><a href=http://localhost:1313/python-foundations-gui-applications/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Part 16: Building Simple GUI Applications with Tkinter</h3><p class=related-post-description>Create desktop applications with Python's built-in Tkinter library. Learn about widgets, layout managers, and build a practical mini-project with a graphical user interface.</p><div class=related-post-meta><time datetime=2025-08-14>August 14, 2025</time><span class=related-post-tags><span class=tag>python</span></span></div></div></a></article></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/python>python</a></li><li><a href=http://localhost:1313/tags/git>git</a></li><li><a href=http://localhost:1313/tags/github>github</a></li><li><a href=http://localhost:1313/tags/pep8>pep8</a></li><li><a href=http://localhost:1313/tags/linting>linting</a></li><li><a href=http://localhost:1313/tags/flake8>flake8</a></li><li><a href=http://localhost:1313/tags/black>black</a></li><li><a href=http://localhost:1313/tags/documentation>documentation</a></li><li><a href=http://localhost:1313/tags/docstrings>docstrings</a></li><li><a href=http://localhost:1313/tags/sphinx>sphinx</a></li></ul><div class=share-buttons><a href="https://twitter.com/intent/tweet?text=Part%207%3a%20Code%20Quality%20%26%20Collaboration%20in%20Python&url=http%3a%2f%2flocalhost%3a1313%2fpython-foundations-code-quality%2f" target=_blank rel=noopener aria-label="Share on Twitter"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3a%2f%2flocalhost%3a1313%2fpython-foundations-code-quality%2f" target=_blank rel=noopener aria-label="Share on LinkedIn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpython-foundations-code-quality%2f" target=_blank rel=noopener aria-label="Share on Facebook"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
</a><a href="https://wa.me/?text=Part%207%3a%20Code%20Quality%20%26%20Collaboration%20in%20Python%20http%3a%2f%2flocalhost%3a1313%2fpython-foundations-code-quality%2f" target=_blank rel=noopener aria-label="Share on WhatsApp"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2.0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77.0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26.0-5.445 4.455-9.885 9.942-9.885a9.865 9.865.0 017.021 2.91 9.788 9.788.0 012.909 6.99c-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24.0 12.045.0 5.463.0.104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652a12.062 12.062.0 005.71 1.447h.006c6.585.0 11.946-5.336 11.949-11.896.0-3.176-1.24-6.165-3.495-8.411"/></svg>
</a><a href="mailto:?subject=Part%207%3a%20Code%20Quality%20%26%20Collaboration%20in%20Python&body=http%3a%2f%2flocalhost%3a1313%2fpython-foundations-code-quality%2f" aria-label="Share via Email"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Michael Brunger</a> |</span>
<span class=footer-links><a href=mailto:michaelbrunger@gmail.com rel="me noopener" target=_blank>Email</a> |
<a href=https://linkedin.com/in/michael-brunger rel="me noopener" target=_blank>LinkedIn</a> |
<a href=http://localhost:1313/terms/ rel=noopener>Terms</a> |
<a href=http://localhost:1313/privacy/ rel=noopener>Privacy</a></span></footer><div id=back-to-top-container><button id=back-to-top class=back-to-top aria-label="Back to top"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg></button></div><script language=javascript type=text/javascript src=http://localhost:1313/menu-trigger.min.1fdaaaa006c69ae56d0620f2af3adf4d9e797e66d323215185b85818508bac37.js></script></body></html>