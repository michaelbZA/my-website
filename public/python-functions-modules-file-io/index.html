<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Part 5: Functions, Modules & File I/O in Python | Michael Brunger</title>
<meta name=keywords content="python,functions,modules,packages,standard library,file io,file handling"><meta name=description content="Learn how to define and use functions, organize code into modules, leverage Python's Standard Library, and perform file operations for reading and writing data."><meta name=author content="Michael Brunger"><link rel=canonical href=http://localhost:1313/python-functions-modules-file-io/><link crossorigin=anonymous href=http://localhost:1313/assets/css/stylesheet.c4cc1e21a445bb0fda61df68a1d9b952b1dcb9bd38d5ca41d3ba642d5b5c1607.css integrity="sha256-xMweIaRFuw/aYd9oodm5UrHcub041cpB07pkLVtcFgc=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/python-functions-modules-file-io/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=text/javascript src='https://app.cookieyes.com/mAsBCNFb37oPK_4XJgj7kpxbljvjKgiPcLeSeiRyslQSWcJQA0P7w_nb-e_NfuwZCdsSDi_gh_1zVLQNUSNV8A=='></script><script id=cookieyes type=text/javascript src=https://cdn-cookieyes.com/client_data/8dbaf9037ea60d809e6f1613/script.js></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Orbitron:wght@400..900&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-XJJLP6S9JL" data-cookieyes=cookieyes-analytics></script><script data-cookieyes=cookieyes-analytics>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XJJLP6S9JL")</script><script src=http://localhost:1313/js/extended/back-to-top.min.js defer></script><script src=http://localhost:1313/js/extended/sticky-header.min.js defer></script><script src=http://localhost:1313/js/extended/menu-trigger.min.js defer></script><meta property="og:url" content="http://localhost:1313/python-functions-modules-file-io/"><meta property="og:site_name" content="Michael Brunger"><meta property="og:title" content="Part 5: Functions, Modules & File I/O in Python"><meta property="og:description" content="Learn how to define and use functions, organize code into modules, leverage Python's Standard Library, and perform file operations for reading and writing data."><meta property="og:locale" content="en-GB"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-29T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-09T14:44:55+01:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Functions"><meta property="article:tag" content="Modules"><meta property="article:tag" content="Packages"><meta property="article:tag" content="Standard Library"><meta property="article:tag" content="File Io"><meta property="og:image" content="http://localhost:1313/site-feature-image.jpg"><meta property="og:see_also" content="http://localhost:1313/python-next-steps-advanced-topics/"><meta property="og:see_also" content="http://localhost:1313/simple-gui-applications-tkinter/"><meta property="og:see_also" content="http://localhost:1313/python-web-development-foundations/"><meta property="og:see_also" content="http://localhost:1313/introduction-object-oriented-programming-python/"><meta property="og:see_also" content="http://localhost:1313/python-data-visualisation-basics/"><meta property="og:see_also" content="http://localhost:1313/data-analysis-with-pandas/"><meta property="og:see_also" content="http://localhost:1313/numpy-fundamentals-numerical-data/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/site-feature-image.jpg"><meta name=twitter:title content="Part 5: Functions, Modules & File I/O in Python"><meta name=twitter:description content="Learn how to define and use functions, organize code into modules, leverage Python's Standard Library, and perform file operations for reading and writing data."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Python Series","item":"http://localhost:1313/posts/python-series/"},{"@type":"ListItem","position":3,"name":"Part 5: Functions, Modules \u0026 File I/O in Python","item":"http://localhost:1313/python-functions-modules-file-io/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Part 5: Functions, Modules \u0026 File I/O in Python","name":"Part 5: Functions, Modules \u0026 File I\/O in Python","description":"Learn how to define and use functions, organize code into modules, leverage Python's Standard Library, and perform file operations for reading and writing data.","keywords":["python","functions","modules","packages","standard library","file io","file handling"],"articleBody":"Functions, Modules \u0026 File I/O in Python As a finance manager diving into Python, I’ve found these next concepts incredibly useful for organizing code and working with external data. Let’s explore how Python handles functions, modules, and file operations - all essential skills for financial analysis and reporting. Defining and Calling Functions Functions are reusable blocks of code that perform specific tasks. They help keep your code DRY (Don’t Repeat Yourself) and make it more maintainable. Basic Function Syntax pythondef function_name(parameters): “““Docstring explaining what the function does.””” # Function body return result # Optional Here’s a simple function that calculates compound interest: pythondef calculate_compound_interest(principal, rate, time, compounds_per_year=1): \"\"\" Calculate compound interest.\nArgs:\rprincipal: Initial investment amount\rrate: Annual interest rate (as decimal, e.g., 0.05 for 5%)\rtime: Time period in years\rcompounds_per_year: Number of times interest compounds per year (default=1)\rReturns:\rThe final amount after compound interest\r\"\"\"\rreturn principal * (1 + rate/compounds_per_year)**(compounds_per_year*time)\rLet’s call this function: python# Calculate investment growth at 5% interest, compounded quarterly for 10 years initial_investment = 10000 final_amount = calculate_compound_interest( principal=initial_investment, rate=0.05, time=10, compounds_per_year=4 ) print(f\"${initial_investment} will grow to ${final_amount:.2f} after 10 years\") Output: $10000 will grow to $16470.09 after 10 years Function Arguments Python offers flexible ways to handle function arguments: Positional vs. Keyword Arguments python# Positional arguments (order matters) result1 = calculate_compound_interest(10000, 0.05, 10, 4)\nKeyword arguments (order doesn’t matter) result2 = calculate_compound_interest( rate=0.05, principal=10000, compounds_per_year=4, time=10 ) Default Parameter Values In our function, compounds_per_year=1 provides a default value if not specified: python# Using the default compounds_per_year (annual compounding) annual_result = calculate_compound_interest(10000, 0.05, 10) print(f\"With annual compounding: ${annual_result:.2f}\") Variable Number of Arguments For functions that need to accept varying numbers of arguments: python# *args collects extra positional arguments as a tuple def sum_all_values(*args): “““Sum any number of values.””” return sum(args)\n**kwargs collects extra keyword arguments as a dictionary def create_financial_report(report_date, **kwargs): “““Create a financial report with flexible data points.””” report = {“date”: report_date} report.update(kwargs) return report\nExample usage total = sum_all_values(100, 250, 300, 75) print(f\"Total: ${total}\")\nreport = create_financial_report( “2025-04-28”, revenue=150000, expenses=95000, net_profit=55000, profit_margin=0.37 ) print(report) Variable Scope and Namespaces Understanding scope is crucial for debugging and writing clean code. Local vs. Global Scope pythontotal_assets = 1000000 # Global variable\ndef calculate_roi(profit): investment = 100000 # Local variable return profit / investment * 100\ninvestment is not accessible here print(f\"Total assets: ${total_assets}\")\nroi = calculate_roi(25000) print(f\"ROI: {roi}%\") Local variables exist only within their function. Global variables can be accessed inside functions, but to modify them, you need the global keyword: pythonbalance = 5000 # Global variable\ndef deposit(amount): global balance # Tell Python we want to modify the global variable balance += amount return balance\ndef withdraw(amount): global balance if balance \u003e= amount: balance -= amount return balance else: return “Insufficient funds”\nprint(f\"Initial balance: ${balance}\") deposit(1000) print(f\"After deposit: ${balance}\") withdraw(2000) print(f\"After withdrawal: ${balance}\") Namespaces Python uses namespaces to organize names and avoid conflicts. Each module, function, and class has its own namespace. Organizing Code into Modules and Packages As your financial scripts grow, organizing code becomes essential. Modules A module is simply a .py file containing code. Let’s create a financial utilities module: python# financial_utils.py def calculate_roi(profit, investment): “““Calculate Return on Investment as a percentage.””” return (profit / investment) * 100\ndef calculate_npv(cash_flows, discount_rate): \"\"\" Calculate Net Present Value of a series of cash flows.\nArgs:\rcash_flows: List of cash flows, where index 0 is the initial investment (negative)\rdiscount_rate: Discount rate as decimal (e.g., 0.1 for 10%)\r\"\"\"\rnpv = 0\rfor t, cash_flow in enumerate(cash_flows):\rnpv += cash_flow / (1 + discount_rate) ** t\rreturn npv\rTo use this module: python# main.py import financial_utils\nCalculate ROI investment = 50000 profit = 12500 roi = financial_utils.calculate_roi(profit, investment) print(f\"ROI: {roi}%\")\nCalculate NPV of a project cash_flows = [-100000, 30000, 35000, 45000, 50000] # Initial investment + 4 years of returns npv = financial_utils.calculate_npv(cash_flows, 0.08) print(f\"NPV: ${npv:.2f}\") You can also import specific functions: pythonfrom financial_utils import calculate_roi, calculate_npv\nNow use without the module prefix roi = calculate_roi(12500, 50000) Packages Packages are directories containing multiple modules. They require an init.py file (which can be empty) to be recognized as packages. finance_package/ ├── init.py ├── analysis.py ├── reporting.py └── utils.py Using packages: python# Import specific modules from a package from finance_package import analysis, reporting\nImport specific functions from a module in a package from finance_package.utils import calculate_roi Exploring the Standard Library Python comes with a rich standard library. Here are some modules particularly useful for financial applications: Math Module pythonimport math\nCalculate loan payment using the PMT formula principal = 250000 annual_rate = 0.04 # 4% years = 30 monthly_rate = annual_rate / 12 num_payments = years * 12\nMonthly payment formula payment = principal * (monthly_rate * math.pow(1 + monthly_rate, num_payments)) / (math.pow(1 + monthly_rate, num_payments) - 1) print(f\"Monthly mortgage payment: ${payment:.2f}\") Random Module pythonimport random\nSimulate stock price movements (very simplified) starting_price = 100 daily_volatility = 0.015 # 1.5%\nprices = [starting_price] for day in range(30): change = random.normalvariate(0, daily_volatility) new_price = prices[-1] * (1 + change) prices.append(new_price)\nprint(f\"Starting price: ${starting_price:.2f}\") print(f\"Ending price: ${prices[-1]:.2f}\") print(f\"30-day return: {(prices[-1]/prices[0] - 1) * 100:.2f}%\") Datetime Module pythonfrom datetime import datetime, timedelta\nCalculate business days between dates def business_days_between(start_date, end_date): “““Count business days between two dates (excluding weekends).””” days = 0 current_date = start_date while current_date \u003c= end_date: # Monday = 0, Sunday = 6 if current_date.weekday() \u003c 5: # Only count weekdays (0-4) days += 1 current_date += timedelta(days=1) return days\nCalculate days until fiscal year end today = datetime.now() fiscal_year_end = datetime(today.year, 12, 31) if today \u003e fiscal_year_end: fiscal_year_end = datetime(today.year + 1, 12, 31)\nbusiness_days = business_days_between(today, fiscal_year_end) print(f\"Business days until fiscal year end: {business_days}\") OS and Sys Modules pythonimport os import sys\nGet the current working directory (useful for file paths) current_dir = os.getcwd() print(f\"Current directory: {current_dir}\")\nList all Excel files in the current directory excel_files = [file for file in os.listdir() if file.endswith((’.xlsx’, ‘.xls’))] print(“Excel files found:”) for file in excel_files: print(f\"- {file}\")\nGet Python version and platform information print(f\"Python version: {sys.version}\") print(f\"Platform: {sys.platform}\") Reading from/Writing to Text Files File operations are essential for financial data analysis, reporting, and automation. Opening and Closing Files The basic pattern is: python# Open a file in read mode file = open(‘data.txt’, ‘r’)\nDo something with the file content = file.read()\nClose the file file.close() However, this approach has problems if an error occurs before close(). The preferred way is using the with statement: The with Statement python# Automatically handles proper closing of the file with open(‘data.txt’, ‘r’) as file: content = file.read() # File processing here\nFile is automatically closed when the block ends Reading Text Files Let’s work with a sample CSV file containing financial transactions: python# Sample contents of transactions.csv:\ndate,description,amount 2025-01-15,Office supplies,-129.99 2025-01-18,Client payment,1500.00 2025-01-22,Software subscription,-49.99 2025-01-30,Consulting fees,2750.00 with open(’transactions.csv’, ‘r’) as file: # Read the entire file as a single string content = file.read() print(“File contents:”) print(content) Reading line by line: pythonwith open(’transactions.csv’, ‘r’) as file: # Skip header header = file.readline()\n# Initialize counters\rtotal_income = 0\rtotal_expenses = 0\r# Process each transaction\rfor line in file:\r# Remove whitespace and split by comma\rdate, description, amount = line.strip().split(',')\r# Convert amount to float\ramount = float(amount)\rif amount \u003e= 0:\rtotal_income += amount\relse:\rtotal_expenses += amount\rprint(f\"Total income: ${total_income:.2f}\")\rprint(f\"Total expenses: ${total_expenses:.2f}\")\rprint(f\"Net cash flow: ${total_income + total_expenses:.2f}\")\rWriting to Text Files Let’s create a simple financial report: python# Sample transaction data transactions = [ {“date”: “2025-01-15”, “description”: “Office supplies”, “amount”: -129.99}, {“date”: “2025-01-18”, “description”: “Client payment”, “amount”: 1500.00}, {“date”: “2025-01-22”, “description”: “Software subscription”, “amount”: -49.99}, {“date”: “2025-01-30”, “description”: “Consulting fees”, “amount”: 2750.00} ]\nCalculate summary statistics total_income = sum(t[“amount”] for t in transactions if t[“amount”] \u003e 0) total_expenses = sum(t[“amount”] for t in transactions if t[“amount”] \u003c 0) net_cash_flow = total_income + total_expenses\nWrite the report to a file with open(‘financial_report.txt’, ‘w’) as report_file: report_file.write(“MONTHLY FINANCIAL REPORT\\n”) report_file.write(\"======================\\n\\n\")\nreport_file.write(\"TRANSACTION DETAILS:\\n\")\rreport_file.write(\"-----------------\\n\")\rfor t in transactions:\ramount_str = f\"${abs(t['amount']):.2f}\"\rif t[\"amount\"] \u003c 0:\ramount_str = f\"-{amount_str}\"\rreport_file.write(f\"{t['date']} | {t['description'].ljust(20)} | {amount_str}\\n\")\rreport_file.write(\"\\nSUMMARY:\\n\")\rreport_file.write(\"--------\\n\")\rreport_file.write(f\"Total Income: ${total_income:.2f}\\n\")\rreport_file.write(f\"Total Expenses: ${total_expenses:.2f}\\n\")\rreport_file.write(f\"Net Cash Flow: ${net_cash_flow:.2f}\\n\")\rprint(“Financial report generated: financial_report.txt”) Handling Different File Modes\n‘r’: Read (default) ‘w’: Write (creates new file or truncates existing) ‘a’: Append (adds to end of file) ‘r+’: Read and write ‘b’: Binary mode (used with other modes, e.g., ‘rb’)\nWorking with CSV Files While you can process CSV files manually as shown above, Python’s csv module makes it easier: pythonimport csv\nReading CSV with open(’transactions.csv’, ‘r’) as file: csv_reader = csv.DictReader(file)\n# Process each row as a dictionary\rtransactions = []\rfor row in csv_reader:\r# Convert amount from string to float\rrow['amount'] = float(row['amount'])\rtransactions.append(row)\rprint(f\"Loaded {len(transactions)} transactions\")\rWriting CSV with open(‘budget_forecast.csv’, ‘w’, newline=’’) as file: # Define column headers fieldnames = [‘month’, ‘revenue’, ’expenses’, ‘profit’]\n# Create CSV writer\rcsv_writer = csv.DictWriter(file, fieldnames=fieldnames)\r# Write header row\rcsv_writer.writeheader()\r# Write data rows\rfor month in range(1, 13):\r# Simple forecast model (for demonstration)\rrevenue = 15000 + (month * 500) # Increasing monthly\rexpenses = 10000 + (month * 200) # Increasing but slower\rprofit = revenue - expenses\rcsv_writer.writerow({\r'month': f\"2025-{month:02d}\",\r'revenue': revenue,\r'expenses': expenses,\r'profit': profit\r})\rprint(“Budget forecast generated: budget_forecast.csv”) Practical Example: Expense Analyzer Let’s combine everything we’ve learned into a practical financial tool that:\nReads expense data from a CSV file Categorizes and analyzes expenses Generates a report with summary statistics\npythonimport csv from datetime import datetime import os\ndef load_expenses(filename): “““Load expense data from a CSV file.””” expenses = []\nwith open(filename, 'r') as file:\rreader = csv.DictReader(file)\rfor row in reader:\r# Convert amount to float and date to datetime\rrow['amount'] = float(row['amount'])\rrow['date'] = datetime.strptime(row['date'], '%Y-%m-%d')\rexpenses.append(row)\rreturn expenses\rdef categorize_expenses(expenses): “““Group expenses by category.””” categories = {}\nfor expense in expenses:\rcategory = expense['category']\rif category not in categories:\rcategories[category] = []\rcategories[category].append(expense)\rreturn categories\rdef calculate_category_totals(categories): “““Calculate total amount for each expense category.””” totals = {}\nfor category, expenses in categories.items():\rtotals[category] = sum(expense['amount'] for expense in expenses)\rreturn totals\rdef generate_expense_report(expenses, categories, totals, output_file): “““Generate a detailed expense report.””” total_expenses = sum(totals.values())\nwith open(output_file, 'w') as file:\r# Write header\rfile.write(\"EXPENSE ANALYSIS REPORT\\n\")\rfile.write(\"======================\\n\\n\")\r# Write summary\rfile.write(f\"Total Expenses: ${total_expenses:.2f}\\n\")\rfile.write(f\"Number of Transactions: {len(expenses)}\\n\")\rfile.write(f\"Date Range: {min(e['date'] for e in expenses).strftime('%Y-%m-%d')} to {max(e['date'] for e in expenses).strftime('%Y-%m-%d')}\\n\\n\")\r# Write category breakdown\rfile.write(\"EXPENSE BREAKDOWN BY CATEGORY\\n\")\rfile.write(\"----------------------------\\n\")\r# Sort categories by total amount (descending)\rsorted_categories = sorted(totals.items(), key=lambda x: x[1], reverse=True)\rfor category, amount in sorted_categories:\rpercentage = (amount / total_expenses) * 100\rfile.write(f\"{category.ljust(20)} ${amount:.2f} ({percentage:.1f}%)\\n\")\r# Write transaction details for each category\rfile.write(\"\\nDETAILED TRANSACTIONS BY CATEGORY\\n\")\rfile.write(\"--------------------------------\\n\\n\")\rfor category, amount in sorted_categories:\rfile.write(f\"{category.upper()}\\n\")\rfile.write(f\"{'-' * len(category)}\\n\")\r# Sort expenses by date\rsorted_expenses = sorted(categories[category], key=lambda x: x['date'])\rfor expense in sorted_expenses:\rdate_str = expense['date'].strftime('%Y-%m-%d')\rfile.write(f\"{date_str} | {expense['description'].ljust(30)} | ${expense['amount']:.2f}\\n\")\r# Add category subtotal\rfile.write(f\"{'SUBTOTAL:'.ljust(41)} ${amount:.2f}\\n\\n\")\rUsage example (assuming we have an expenses.csv file) def main(): # Check if the input file exists input_file = ’expenses.csv’ if not os.path.exists(input_file): print(f\"Error: File ‘{input_file}’ not found.\") print(“Creating a sample expense file for demonstration…”)\n# Create a sample file for demonstration\rwith open(input_file, 'w', newline='') as file:\rwriter = csv.writer(file)\rwriter.writerow(['date', 'category', 'description', 'amount'])\rwriter.writerow(['2025-01-05', 'Office', 'Printer paper', 24.99])\rwriter.writerow(['2025-01-10', 'Software', 'Accounting software', 89.99])\rwriter.writerow(['2025-01-15', 'Office', 'Desk organizer', 32.50])\rwriter.writerow(['2025-01-18', 'Travel', 'Client meeting transportation', 45.75])\rwriter.writerow(['2025-01-22', 'Software', 'Cloud storage subscription', 9.99])\rwriter.writerow(['2025-01-25', 'Meals', 'Team lunch', 87.50])\rwriter.writerow(['2025-01-29', 'Office', 'Printer ink', 65.85])\rwriter.writerow(['2025-02-03', 'Travel', 'Conference registration', 299.00])\rwriter.writerow(['2025-02-07', 'Meals', 'Client dinner', 125.40])\rwriter.writerow(['2025-02-15', 'Software', 'Data analysis tool', 149.99])\rprint(f\"Sample file '{input_file}' created.\")\r# Process the expense data\rexpenses = load_expenses(input_file)\rcategories = categorize_expenses(expenses)\rtotals = calculate_category_totals(categories)\r# Generate the report\routput_file = 'expense_report.txt'\rgenerate_expense_report(expenses, categories, totals, output_file)\rprint(f\"Expense report generated: {output_file}\")\rif name == “main”: main() This script demonstrates:\nFunction definitions with docstrings File I/O with the with statement CSV processing Module imports and usage Error handling\nConclusion Functions, modules, and file I/O form the backbone of most Python applications, especially for financial tasks. By mastering these concepts, you’ll be well-equipped to build tools for financial analysis, reporting, and automation. In the next post, we’ll explore virtual environments and package management, which will help you manage dependencies for larger projects. Practice Exercise: Try extending the expense analyzer to calculate monthly trends or generate a simple visualization of spending by category. This will help reinforce the concepts we’ve covered while building something useful for your financial toolkit.\n","wordCount":"2059","inLanguage":"en","image":"http://localhost:1313/site-feature-image.jpg","datePublished":"2025-05-29T00:00:00Z","dateModified":"2025-05-09T14:44:55+01:00","author":{"@type":"Person","name":"Michael Brunger"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/python-functions-modules-file-io/"},"publisher":{"@type":"Organization","name":"Michael Brunger","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Michael Brunger (Alt + H)">Michael Brunger</a><div class=logo-switches></div></div><ul class="menu desktop-menu"><li><a href=http://localhost:1313/ title=Home><span>Home</span></a></li><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/links/ title=Links><span>Links</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://localhost:1313/contact/ title=Contact><span>Contact</span></a></li></ul><button id=menu-trigger class=hamburger-menu aria-haspopup=menu aria-label="Menu Button"><div class=hamburger-icon><span></span>
<span></span>
<span></span>
<span></span></div></button></nav></header><div class=mobile-menu-overlay><ul class=mobile-menu><li><a href=http://localhost:1313/>Home</a></li><li><a href=http://localhost:1313/posts/>Posts</a></li><li><a href=http://localhost:1313/about/>About</a></li><li><a href=http://localhost:1313/links/>Links</a></li><li><a href=http://localhost:1313/search/>Search</a></li><li><a href=http://localhost:1313/contact/>Contact</a></li></ul></div><main class=main><div class=reading-progress-container><div class=reading-progress-bar></div></div><script>console.log("Reading progress script loaded"),document.addEventListener("DOMContentLoaded",function(){console.log("DOM Content Loaded");const e=document.querySelector(".reading-progress-bar");if(console.log("Progress bar element:",e),!e){console.log("No progress bar found");return}window.addEventListener("scroll",function(){const n=window.innerHeight,s=document.documentElement.scrollHeight-n,o=window.scrollY,t=o/s*100;e.style.width=t+"%",console.log("Progress:",t+"%")})})</script><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Part 5: Functions, Modules & File I/O in Python</h1><div class=post-description>Learn how to define and use functions, organize code into modules, leverage Python&rsquo;s Standard Library, and perform file operations for reading and writing data.</div><div class=post-meta><span class=post-date><i class="far fa-calendar-alt"></i>
May 29, 2025
</span><span class=post-lastmod><i class="fas fa-edit"></i>
Last modified: May 9, 2025
</span><span class=post-reading-time><i class="far fa-clock"></i>
10 min read</span></div></header><div class=toc><details><summary>Table of Contents</summary><nav id=TableOfContents></nav></details></div><div class=post-content><p>Functions, Modules & File I/O in Python
As a finance manager diving into Python, I&rsquo;ve found these next concepts incredibly useful for organizing code and working with external data. Let&rsquo;s explore how Python handles functions, modules, and file operations - all essential skills for financial analysis and reporting.
Defining and Calling Functions
Functions are reusable blocks of code that perform specific tasks. They help keep your code DRY (Don&rsquo;t Repeat Yourself) and make it more maintainable.
Basic Function Syntax
pythondef function_name(parameters):
&ldquo;&ldquo;&ldquo;Docstring explaining what the function does.&rdquo;&rdquo;&rdquo;
# Function body
return result # Optional
Here&rsquo;s a simple function that calculates compound interest:
pythondef calculate_compound_interest(principal, rate, time, compounds_per_year=1):
"""
Calculate compound interest.</p><pre><code>Args:
    principal: Initial investment amount
    rate: Annual interest rate (as decimal, e.g., 0.05 for 5%)
    time: Time period in years
    compounds_per_year: Number of times interest compounds per year (default=1)

Returns:
    The final amount after compound interest
&quot;&quot;&quot;
return principal * (1 + rate/compounds_per_year)**(compounds_per_year*time)
</code></pre><p>Let&rsquo;s call this function:
python# Calculate investment growth at 5% interest, compounded quarterly for 10 years
initial_investment = 10000
final_amount = calculate_compound_interest(
principal=initial_investment,
rate=0.05,
time=10,
compounds_per_year=4
)
print(f"${initial_investment} will grow to ${final_amount:.2f} after 10 years")
Output:
$10000 will grow to $16470.09 after 10 years
Function Arguments
Python offers flexible ways to handle function arguments:
Positional vs. Keyword Arguments
python# Positional arguments (order matters)
result1 = calculate_compound_interest(10000, 0.05, 10, 4)</p><h1 id=keyword-arguments-order-doesnt-matter>Keyword arguments (order doesn&rsquo;t matter)<a hidden class=anchor aria-hidden=true href=#keyword-arguments-order-doesnt-matter>#</a></h1><p>result2 = calculate_compound_interest(
rate=0.05,
principal=10000,
compounds_per_year=4,
time=10
)
Default Parameter Values
In our function, compounds_per_year=1 provides a default value if not specified:
python# Using the default compounds_per_year (annual compounding)
annual_result = calculate_compound_interest(10000, 0.05, 10)
print(f"With annual compounding: ${annual_result:.2f}")
Variable Number of Arguments
For functions that need to accept varying numbers of arguments:
python# *args collects extra positional arguments as a tuple
def sum_all_values(*args):
&ldquo;&ldquo;&ldquo;Sum any number of values.&rdquo;&rdquo;&rdquo;
return sum(args)</p><h1 id=kwargs-collects-extra-keyword-arguments-as-a-dictionary>**kwargs collects extra keyword arguments as a dictionary<a hidden class=anchor aria-hidden=true href=#kwargs-collects-extra-keyword-arguments-as-a-dictionary>#</a></h1><p>def create_financial_report(report_date, **kwargs):
&ldquo;&ldquo;&ldquo;Create a financial report with flexible data points.&rdquo;&rdquo;&rdquo;
report = {&ldquo;date&rdquo;: report_date}
report.update(kwargs)
return report</p><h1 id=example-usage>Example usage<a hidden class=anchor aria-hidden=true href=#example-usage>#</a></h1><p>total = sum_all_values(100, 250, 300, 75)
print(f"Total: ${total}")</p><p>report = create_financial_report(
&ldquo;2025-04-28&rdquo;,
revenue=150000,
expenses=95000,
net_profit=55000,
profit_margin=0.37
)
print(report)
Variable Scope and Namespaces
Understanding scope is crucial for debugging and writing clean code.
Local vs. Global Scope
pythontotal_assets = 1000000 # Global variable</p><p>def calculate_roi(profit):
investment = 100000 # Local variable
return profit / investment * 100</p><h1 id=investment-is-not-accessible-here>investment is not accessible here<a hidden class=anchor aria-hidden=true href=#investment-is-not-accessible-here>#</a></h1><p>print(f"Total assets: ${total_assets}")</p><p>roi = calculate_roi(25000)
print(f"ROI: {roi}%")
Local variables exist only within their function. Global variables can be accessed inside functions, but to modify them, you need the global keyword:
pythonbalance = 5000 # Global variable</p><p>def deposit(amount):
global balance # Tell Python we want to modify the global variable
balance += amount
return balance</p><p>def withdraw(amount):
global balance
if balance >= amount:
balance -= amount
return balance
else:
return &ldquo;Insufficient funds&rdquo;</p><p>print(f"Initial balance: ${balance}")
deposit(1000)
print(f"After deposit: ${balance}")
withdraw(2000)
print(f"After withdrawal: ${balance}")
Namespaces
Python uses namespaces to organize names and avoid conflicts. Each module, function, and class has its own namespace.
Organizing Code into Modules and Packages
As your financial scripts grow, organizing code becomes essential.
Modules
A module is simply a .py file containing code. Let&rsquo;s create a financial utilities module:
python# financial_utils.py
def calculate_roi(profit, investment):
&ldquo;&ldquo;&ldquo;Calculate Return on Investment as a percentage.&rdquo;&rdquo;&rdquo;
return (profit / investment) * 100</p><p>def calculate_npv(cash_flows, discount_rate):
"""
Calculate Net Present Value of a series of cash flows.</p><pre><code>Args:
    cash_flows: List of cash flows, where index 0 is the initial investment (negative)
    discount_rate: Discount rate as decimal (e.g., 0.1 for 10%)
&quot;&quot;&quot;
npv = 0
for t, cash_flow in enumerate(cash_flows):
    npv += cash_flow / (1 + discount_rate) ** t
return npv
</code></pre><p>To use this module:
python# main.py
import financial_utils</p><h1 id=calculate-roi>Calculate ROI<a hidden class=anchor aria-hidden=true href=#calculate-roi>#</a></h1><p>investment = 50000
profit = 12500
roi = financial_utils.calculate_roi(profit, investment)
print(f"ROI: {roi}%")</p><h1 id=calculate-npv-of-a-project>Calculate NPV of a project<a hidden class=anchor aria-hidden=true href=#calculate-npv-of-a-project>#</a></h1><p>cash_flows = [-100000, 30000, 35000, 45000, 50000] # Initial investment + 4 years of returns
npv = financial_utils.calculate_npv(cash_flows, 0.08)
print(f"NPV: ${npv:.2f}")
You can also import specific functions:
pythonfrom financial_utils import calculate_roi, calculate_npv</p><h1 id=now-use-without-the-module-prefix>Now use without the module prefix<a hidden class=anchor aria-hidden=true href=#now-use-without-the-module-prefix>#</a></h1><p>roi = calculate_roi(12500, 50000)
Packages
Packages are directories containing multiple modules. They require an <strong>init</strong>.py file (which can be empty) to be recognized as packages.
finance_package/
├── <strong>init</strong>.py
├── analysis.py
├── reporting.py
└── utils.py
Using packages:
python# Import specific modules from a package
from finance_package import analysis, reporting</p><h1 id=import-specific-functions-from-a-module-in-a-package>Import specific functions from a module in a package<a hidden class=anchor aria-hidden=true href=#import-specific-functions-from-a-module-in-a-package>#</a></h1><p>from finance_package.utils import calculate_roi
Exploring the Standard Library
Python comes with a rich standard library. Here are some modules particularly useful for financial applications:
Math Module
pythonimport math</p><h1 id=calculate-loan-payment-using-the-pmt-formula>Calculate loan payment using the PMT formula<a hidden class=anchor aria-hidden=true href=#calculate-loan-payment-using-the-pmt-formula>#</a></h1><p>principal = 250000
annual_rate = 0.04 # 4%
years = 30
monthly_rate = annual_rate / 12
num_payments = years * 12</p><h1 id=monthly-payment-formula>Monthly payment formula<a hidden class=anchor aria-hidden=true href=#monthly-payment-formula>#</a></h1><p>payment = principal * (monthly_rate * math.pow(1 + monthly_rate, num_payments)) / (math.pow(1 + monthly_rate, num_payments) - 1)
print(f"Monthly mortgage payment: ${payment:.2f}")
Random Module
pythonimport random</p><h1 id=simulate-stock-price-movements-very-simplified>Simulate stock price movements (very simplified)<a hidden class=anchor aria-hidden=true href=#simulate-stock-price-movements-very-simplified>#</a></h1><p>starting_price = 100
daily_volatility = 0.015 # 1.5%</p><p>prices = [starting_price]
for day in range(30):
change = random.normalvariate(0, daily_volatility)
new_price = prices[-1] * (1 + change)
prices.append(new_price)</p><p>print(f"Starting price: ${starting_price:.2f}")
print(f"Ending price: ${prices[-1]:.2f}")
print(f"30-day return: {(prices[-1]/prices[0] - 1) * 100:.2f}%")
Datetime Module
pythonfrom datetime import datetime, timedelta</p><h1 id=calculate-business-days-between-dates>Calculate business days between dates<a hidden class=anchor aria-hidden=true href=#calculate-business-days-between-dates>#</a></h1><p>def business_days_between(start_date, end_date):
&ldquo;&ldquo;&ldquo;Count business days between two dates (excluding weekends).&rdquo;&rdquo;&rdquo;
days = 0
current_date = start_date
while current_date &lt;= end_date:
# Monday = 0, Sunday = 6
if current_date.weekday() &lt; 5: # Only count weekdays (0-4)
days += 1
current_date += timedelta(days=1)
return days</p><h1 id=calculate-days-until-fiscal-year-end>Calculate days until fiscal year end<a hidden class=anchor aria-hidden=true href=#calculate-days-until-fiscal-year-end>#</a></h1><p>today = datetime.now()
fiscal_year_end = datetime(today.year, 12, 31)
if today > fiscal_year_end:
fiscal_year_end = datetime(today.year + 1, 12, 31)</p><p>business_days = business_days_between(today, fiscal_year_end)
print(f"Business days until fiscal year end: {business_days}")
OS and Sys Modules
pythonimport os
import sys</p><h1 id=get-the-current-working-directory-useful-for-file-paths>Get the current working directory (useful for file paths)<a hidden class=anchor aria-hidden=true href=#get-the-current-working-directory-useful-for-file-paths>#</a></h1><p>current_dir = os.getcwd()
print(f"Current directory: {current_dir}")</p><h1 id=list-all-excel-files-in-the-current-directory>List all Excel files in the current directory<a hidden class=anchor aria-hidden=true href=#list-all-excel-files-in-the-current-directory>#</a></h1><p>excel_files = [file for file in os.listdir() if file.endswith((&rsquo;.xlsx&rsquo;, &lsquo;.xls&rsquo;))]
print(&ldquo;Excel files found:&rdquo;)
for file in excel_files:
print(f"- {file}")</p><h1 id=get-python-version-and-platform-information>Get Python version and platform information<a hidden class=anchor aria-hidden=true href=#get-python-version-and-platform-information>#</a></h1><p>print(f"Python version: {sys.version}")
print(f"Platform: {sys.platform}")
Reading from/Writing to Text Files
File operations are essential for financial data analysis, reporting, and automation.
Opening and Closing Files
The basic pattern is:
python# Open a file in read mode
file = open(&lsquo;data.txt&rsquo;, &lsquo;r&rsquo;)</p><h1 id=do-something-with-the-file>Do something with the file<a hidden class=anchor aria-hidden=true href=#do-something-with-the-file>#</a></h1><p>content = file.read()</p><h1 id=close-the-file>Close the file<a hidden class=anchor aria-hidden=true href=#close-the-file>#</a></h1><p>file.close()
However, this approach has problems if an error occurs before close(). The preferred way is using the with statement:
The with Statement
python# Automatically handles proper closing of the file
with open(&lsquo;data.txt&rsquo;, &lsquo;r&rsquo;) as file:
content = file.read()
# File processing here</p><h1 id=file-is-automatically-closed-when-the-block-ends>File is automatically closed when the block ends<a hidden class=anchor aria-hidden=true href=#file-is-automatically-closed-when-the-block-ends>#</a></h1><p>Reading Text Files
Let&rsquo;s work with a sample CSV file containing financial transactions:
python# Sample contents of transactions.csv:</p><h1 id=datedescriptionamount>date,description,amount<a hidden class=anchor aria-hidden=true href=#datedescriptionamount>#</a></h1><h1 id=2025-01-15office-supplies-12999>2025-01-15,Office supplies,-129.99<a hidden class=anchor aria-hidden=true href=#2025-01-15office-supplies-12999>#</a></h1><h1 id=2025-01-18client-payment150000>2025-01-18,Client payment,1500.00<a hidden class=anchor aria-hidden=true href=#2025-01-18client-payment150000>#</a></h1><h1 id=2025-01-22software-subscription-4999>2025-01-22,Software subscription,-49.99<a hidden class=anchor aria-hidden=true href=#2025-01-22software-subscription-4999>#</a></h1><h1 id=2025-01-30consulting-fees275000>2025-01-30,Consulting fees,2750.00<a hidden class=anchor aria-hidden=true href=#2025-01-30consulting-fees275000>#</a></h1><p>with open(&rsquo;transactions.csv&rsquo;, &lsquo;r&rsquo;) as file:
# Read the entire file as a single string
content = file.read()
print(&ldquo;File contents:&rdquo;)
print(content)
Reading line by line:
pythonwith open(&rsquo;transactions.csv&rsquo;, &lsquo;r&rsquo;) as file:
# Skip header
header = file.readline()</p><pre><code># Initialize counters
total_income = 0
total_expenses = 0

# Process each transaction
for line in file:
    # Remove whitespace and split by comma
    date, description, amount = line.strip().split(',')
    
    # Convert amount to float
    amount = float(amount)
    
    if amount &gt;= 0:
        total_income += amount
    else:
        total_expenses += amount

print(f&quot;Total income: ${total_income:.2f}&quot;)
print(f&quot;Total expenses: ${total_expenses:.2f}&quot;)
print(f&quot;Net cash flow: ${total_income + total_expenses:.2f}&quot;)
</code></pre><p>Writing to Text Files
Let&rsquo;s create a simple financial report:
python# Sample transaction data
transactions = [
{&ldquo;date&rdquo;: &ldquo;2025-01-15&rdquo;, &ldquo;description&rdquo;: &ldquo;Office supplies&rdquo;, &ldquo;amount&rdquo;: -129.99},
{&ldquo;date&rdquo;: &ldquo;2025-01-18&rdquo;, &ldquo;description&rdquo;: &ldquo;Client payment&rdquo;, &ldquo;amount&rdquo;: 1500.00},
{&ldquo;date&rdquo;: &ldquo;2025-01-22&rdquo;, &ldquo;description&rdquo;: &ldquo;Software subscription&rdquo;, &ldquo;amount&rdquo;: -49.99},
{&ldquo;date&rdquo;: &ldquo;2025-01-30&rdquo;, &ldquo;description&rdquo;: &ldquo;Consulting fees&rdquo;, &ldquo;amount&rdquo;: 2750.00}
]</p><h1 id=calculate-summary-statistics>Calculate summary statistics<a hidden class=anchor aria-hidden=true href=#calculate-summary-statistics>#</a></h1><p>total_income = sum(t[&ldquo;amount&rdquo;] for t in transactions if t[&ldquo;amount&rdquo;] > 0)
total_expenses = sum(t[&ldquo;amount&rdquo;] for t in transactions if t[&ldquo;amount&rdquo;] &lt; 0)
net_cash_flow = total_income + total_expenses</p><h1 id=write-the-report-to-a-file>Write the report to a file<a hidden class=anchor aria-hidden=true href=#write-the-report-to-a-file>#</a></h1><p>with open(&lsquo;financial_report.txt&rsquo;, &lsquo;w&rsquo;) as report_file:
report_file.write(&ldquo;MONTHLY FINANCIAL REPORT\n&rdquo;)
report_file.write("======================\n\n")</p><pre><code>report_file.write(&quot;TRANSACTION DETAILS:\n&quot;)
report_file.write(&quot;-----------------\n&quot;)

for t in transactions:
    amount_str = f&quot;${abs(t['amount']):.2f}&quot;
    if t[&quot;amount&quot;] &lt; 0:
        amount_str = f&quot;-{amount_str}&quot;
    
    report_file.write(f&quot;{t['date']} | {t['description'].ljust(20)} | {amount_str}\n&quot;)

report_file.write(&quot;\nSUMMARY:\n&quot;)
report_file.write(&quot;--------\n&quot;)
report_file.write(f&quot;Total Income:    ${total_income:.2f}\n&quot;)
report_file.write(f&quot;Total Expenses:  ${total_expenses:.2f}\n&quot;)
report_file.write(f&quot;Net Cash Flow:   ${net_cash_flow:.2f}\n&quot;)
</code></pre><p>print(&ldquo;Financial report generated: financial_report.txt&rdquo;)
Handling Different File Modes</p><p>&lsquo;r&rsquo;: Read (default)
&lsquo;w&rsquo;: Write (creates new file or truncates existing)
&lsquo;a&rsquo;: Append (adds to end of file)
&lsquo;r+&rsquo;: Read and write
&lsquo;b&rsquo;: Binary mode (used with other modes, e.g., &lsquo;rb&rsquo;)</p><p>Working with CSV Files
While you can process CSV files manually as shown above, Python&rsquo;s csv module makes it easier:
pythonimport csv</p><h1 id=reading-csv>Reading CSV<a hidden class=anchor aria-hidden=true href=#reading-csv>#</a></h1><p>with open(&rsquo;transactions.csv&rsquo;, &lsquo;r&rsquo;) as file:
csv_reader = csv.DictReader(file)</p><pre><code># Process each row as a dictionary
transactions = []
for row in csv_reader:
    # Convert amount from string to float
    row['amount'] = float(row['amount'])
    transactions.append(row)

print(f&quot;Loaded {len(transactions)} transactions&quot;)
</code></pre><h1 id=writing-csv>Writing CSV<a hidden class=anchor aria-hidden=true href=#writing-csv>#</a></h1><p>with open(&lsquo;budget_forecast.csv&rsquo;, &lsquo;w&rsquo;, newline=&rsquo;&rsquo;) as file:
# Define column headers
fieldnames = [&lsquo;month&rsquo;, &lsquo;revenue&rsquo;, &rsquo;expenses&rsquo;, &lsquo;profit&rsquo;]</p><pre><code># Create CSV writer
csv_writer = csv.DictWriter(file, fieldnames=fieldnames)

# Write header row
csv_writer.writeheader()

# Write data rows
for month in range(1, 13):
    # Simple forecast model (for demonstration)
    revenue = 15000 + (month * 500)  # Increasing monthly
    expenses = 10000 + (month * 200)  # Increasing but slower
    profit = revenue - expenses
    
    csv_writer.writerow({
        'month': f&quot;2025-{month:02d}&quot;,
        'revenue': revenue,
        'expenses': expenses,
        'profit': profit
    })
</code></pre><p>print(&ldquo;Budget forecast generated: budget_forecast.csv&rdquo;)
Practical Example: Expense Analyzer
Let&rsquo;s combine everything we&rsquo;ve learned into a practical financial tool that:</p><p>Reads expense data from a CSV file
Categorizes and analyzes expenses
Generates a report with summary statistics</p><p>pythonimport csv
from datetime import datetime
import os</p><p>def load_expenses(filename):
&ldquo;&ldquo;&ldquo;Load expense data from a CSV file.&rdquo;&rdquo;&rdquo;
expenses = []</p><pre><code>with open(filename, 'r') as file:
    reader = csv.DictReader(file)
    for row in reader:
        # Convert amount to float and date to datetime
        row['amount'] = float(row['amount'])
        row['date'] = datetime.strptime(row['date'], '%Y-%m-%d')
        expenses.append(row)

return expenses
</code></pre><p>def categorize_expenses(expenses):
&ldquo;&ldquo;&ldquo;Group expenses by category.&rdquo;&rdquo;&rdquo;
categories = {}</p><pre><code>for expense in expenses:
    category = expense['category']
    
    if category not in categories:
        categories[category] = []
    
    categories[category].append(expense)

return categories
</code></pre><p>def calculate_category_totals(categories):
&ldquo;&ldquo;&ldquo;Calculate total amount for each expense category.&rdquo;&rdquo;&rdquo;
totals = {}</p><pre><code>for category, expenses in categories.items():
    totals[category] = sum(expense['amount'] for expense in expenses)

return totals
</code></pre><p>def generate_expense_report(expenses, categories, totals, output_file):
&ldquo;&ldquo;&ldquo;Generate a detailed expense report.&rdquo;&rdquo;&rdquo;
total_expenses = sum(totals.values())</p><pre><code>with open(output_file, 'w') as file:
    # Write header
    file.write(&quot;EXPENSE ANALYSIS REPORT\n&quot;)
    file.write(&quot;======================\n\n&quot;)
    
    # Write summary
    file.write(f&quot;Total Expenses: ${total_expenses:.2f}\n&quot;)
    file.write(f&quot;Number of Transactions: {len(expenses)}\n&quot;)
    file.write(f&quot;Date Range: {min(e['date'] for e in expenses).strftime('%Y-%m-%d')} to {max(e['date'] for e in expenses).strftime('%Y-%m-%d')}\n\n&quot;)
    
    # Write category breakdown
    file.write(&quot;EXPENSE BREAKDOWN BY CATEGORY\n&quot;)
    file.write(&quot;----------------------------\n&quot;)
    
    # Sort categories by total amount (descending)
    sorted_categories = sorted(totals.items(), key=lambda x: x[1], reverse=True)
    
    for category, amount in sorted_categories:
        percentage = (amount / total_expenses) * 100
        file.write(f&quot;{category.ljust(20)} ${amount:.2f} ({percentage:.1f}%)\n&quot;)
    
    # Write transaction details for each category
    file.write(&quot;\nDETAILED TRANSACTIONS BY CATEGORY\n&quot;)
    file.write(&quot;--------------------------------\n\n&quot;)
    
    for category, amount in sorted_categories:
        file.write(f&quot;{category.upper()}\n&quot;)
        file.write(f&quot;{'-' * len(category)}\n&quot;)
        
        # Sort expenses by date
        sorted_expenses = sorted(categories[category], key=lambda x: x['date'])
        
        for expense in sorted_expenses:
            date_str = expense['date'].strftime('%Y-%m-%d')
            file.write(f&quot;{date_str} | {expense['description'].ljust(30)} | ${expense['amount']:.2f}\n&quot;)
        
        # Add category subtotal
        file.write(f&quot;{'SUBTOTAL:'.ljust(41)} ${amount:.2f}\n\n&quot;)
</code></pre><h1 id=usage-example-assuming-we-have-an-expensescsv-file>Usage example (assuming we have an expenses.csv file)<a hidden class=anchor aria-hidden=true href=#usage-example-assuming-we-have-an-expensescsv-file>#</a></h1><p>def main():
# Check if the input file exists
input_file = &rsquo;expenses.csv&rsquo;
if not os.path.exists(input_file):
print(f"Error: File &lsquo;{input_file}&rsquo; not found.")
print(&ldquo;Creating a sample expense file for demonstration&mldr;&rdquo;)</p><pre><code>    # Create a sample file for demonstration
    with open(input_file, 'w', newline='') as file:
        writer = csv.writer(file)
        writer.writerow(['date', 'category', 'description', 'amount'])
        writer.writerow(['2025-01-05', 'Office', 'Printer paper', 24.99])
        writer.writerow(['2025-01-10', 'Software', 'Accounting software', 89.99])
        writer.writerow(['2025-01-15', 'Office', 'Desk organizer', 32.50])
        writer.writerow(['2025-01-18', 'Travel', 'Client meeting transportation', 45.75])
        writer.writerow(['2025-01-22', 'Software', 'Cloud storage subscription', 9.99])
        writer.writerow(['2025-01-25', 'Meals', 'Team lunch', 87.50])
        writer.writerow(['2025-01-29', 'Office', 'Printer ink', 65.85])
        writer.writerow(['2025-02-03', 'Travel', 'Conference registration', 299.00])
        writer.writerow(['2025-02-07', 'Meals', 'Client dinner', 125.40])
        writer.writerow(['2025-02-15', 'Software', 'Data analysis tool', 149.99])
    
    print(f&quot;Sample file '{input_file}' created.&quot;)

# Process the expense data
expenses = load_expenses(input_file)
categories = categorize_expenses(expenses)
totals = calculate_category_totals(categories)

# Generate the report
output_file = 'expense_report.txt'
generate_expense_report(expenses, categories, totals, output_file)

print(f&quot;Expense report generated: {output_file}&quot;)
</code></pre><p>if <strong>name</strong> == &ldquo;<strong>main</strong>&rdquo;:
main()
This script demonstrates:</p><p>Function definitions with docstrings
File I/O with the with statement
CSV processing
Module imports and usage
Error handling</p><p>Conclusion
Functions, modules, and file I/O form the backbone of most Python applications, especially for financial tasks. By mastering these concepts, you&rsquo;ll be well-equipped to build tools for financial analysis, reporting, and automation.
In the next post, we&rsquo;ll explore virtual environments and package management, which will help you manage dependencies for larger projects.
Practice Exercise: Try extending the expense analyzer to calculate monthly trends or generate a simple visualization of spending by category. This will help reinforce the concepts we&rsquo;ve covered while building something useful for your financial toolkit.</p></div><div class=related-posts><h2>Related Posts</h2><div class=related-posts-grid><article class=related-post><a href=http://localhost:1313/python-next-steps-advanced-topics/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Part 17: Next Steps & Advanced Python Topics</h3><p class=related-post-description>Explore advanced Python topics including concurrency, asyncio, and complete an end-to-end project. Discover resources for further learning and tips for continuing your Python journey.</p><div class=related-post-meta><time datetime=2025-08-21>August 21, 2025</time><span class=related-post-tags><span class=tag>python</span></span></div></div></a></article><article class=related-post><a href=http://localhost:1313/simple-gui-applications-tkinter/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Part 16: Building Simple GUI Applications with Tkinter</h3><p class=related-post-description>Create desktop applications with Python's built-in Tkinter library. Learn about widgets, layout managers, and build a practical mini-project with a graphical user interface.</p><div class=related-post-meta><time datetime=2025-08-14>August 14, 2025</time><span class=related-post-tags><span class=tag>python</span></span></div></div></a></article><article class=related-post><a href=http://localhost:1313/python-web-development-foundations/ class=related-post-link><div class=related-post-content><h3 class=related-post-title>Part 15: Web Development Foundations with Python</h3><p class=related-post-description>Explore web development options in Python. Learn Flask for lightweight applications, Django for full-featured sites, or web scraping with requests and BeautifulSoup. Deploy your first web app.</p><div class=related-post-meta><time datetime=2025-08-07>August 7, 2025</time><span class=related-post-tags><span class=tag>python</span></span></div></div></a></article></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/python>python</a></li><li><a href=http://localhost:1313/tags/functions>functions</a></li><li><a href=http://localhost:1313/tags/modules>modules</a></li><li><a href=http://localhost:1313/tags/packages>packages</a></li><li><a href=http://localhost:1313/tags/standard-library>standard library</a></li><li><a href=http://localhost:1313/tags/file-io>file io</a></li><li><a href=http://localhost:1313/tags/file-handling>file handling</a></li></ul><div class=share-buttons><a href="https://twitter.com/intent/tweet?text=Part%205%3a%20Functions%2c%20Modules%20%26%20File%20I%2fO%20in%20Python&url=http%3a%2f%2flocalhost%3a1313%2fpython-functions-modules-file-io%2f" target=_blank rel=noopener aria-label="Share on Twitter"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3a%2f%2flocalhost%3a1313%2fpython-functions-modules-file-io%2f" target=_blank rel=noopener aria-label="Share on LinkedIn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpython-functions-modules-file-io%2f" target=_blank rel=noopener aria-label="Share on Facebook"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
</a><a href="https://wa.me/?text=Part%205%3a%20Functions%2c%20Modules%20%26%20File%20I%2fO%20in%20Python%20http%3a%2f%2flocalhost%3a1313%2fpython-functions-modules-file-io%2f" target=_blank rel=noopener aria-label="Share on WhatsApp"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2.0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77.0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26.0-5.445 4.455-9.885 9.942-9.885a9.865 9.865.0 017.021 2.91 9.788 9.788.0 012.909 6.99c-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24.0 12.045.0 5.463.0.104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652a12.062 12.062.0 005.71 1.447h.006c6.585.0 11.946-5.336 11.949-11.896.0-3.176-1.24-6.165-3.495-8.411"/></svg>
</a><a href="mailto:?subject=Part%205%3a%20Functions%2c%20Modules%20%26%20File%20I%2fO%20in%20Python&body=http%3a%2f%2flocalhost%3a1313%2fpython-functions-modules-file-io%2f" aria-label="Share via Email"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Michael Brunger</a> |</span>
<span class=footer-links><a href=mailto:michaelbrunger@gmail.com rel="me noopener" target=_blank>Email</a> |
<a href=https://linkedin.com/in/michael-brunger rel="me noopener" target=_blank>LinkedIn</a> |
<a href=http://localhost:1313/terms/ rel=noopener>Terms</a> |
<a href=http://localhost:1313/privacy/ rel=noopener>Privacy</a></span></footer><div id=back-to-top-container><button id=back-to-top class=back-to-top aria-label="Back to top"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg></button></div><script language=javascript type=text/javascript src=http://localhost:1313/menu-trigger.min.1fdaaaa006c69ae56d0620f2af3adf4d9e797e66d323215185b85818508bac37.js></script></body></html>